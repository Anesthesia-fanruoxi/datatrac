import{n as pl,g as M,p as ml,r as I,v as Cn,d as ne,h as k,q as xt,s as De,x as Oe,y as N,z as _,A as V,B as Qt,C as Q,D as Xt,E as bl,G as Yt,H as Ge,I as wn,J as et,u as Me,K as Sn,L as kt,M as Rn,O as yl,W as xl,P as kl,Q as Cl,R as It,T as ve,U as wl,V as Ke,X as Sl,Y as Rl,Z as Tn,$ as Nn,a0 as Tl,F as Re,a1 as Nl,a2 as Dl,a3 as Zt,a4 as tt,a5 as _e,a6 as $l,a7 as Il,a8 as pe,m as en,a9 as fn,aa as Pl,ab as Dn,ac as ee,ad as Jt,ae as jt,af as $n,ag as In,ah as mt,ai as ke,aj as Ne,ak as qt,al as Nt,am as hn,an as vt,ao as be,ap as Xe,aq as vn,ar as gn,as as zl,o as z,c as fe,a as te,b as El,e as s,w as c,f as n,i as F,t as G,k as j,N as me,at as bt,l as Z,au as Dt,av as Pn,j as ut,aw as Kl,ax as Bl}from"./index-DVUYEo1S.js";import{g as zn,f as Ll,i as En,j as Al,k as zt,u as tn,B as Ce,a as oe,b as Pe,N as Et,_ as Kn,h as Ye,c as Je,R as _l,e as Ht}from"./_plugin-vue_export-helper-D0l3HQ5W.js";import{S as ct,A as Ol,u as nn,N as Fl,a as Ml}from"./syncTask-CaCuPa9_.js";import{j as Vl,k as ln,V as Ul,d as we,e as Fe,f as pn,c as Lt,l as yt,m as Ae,n as jl,a as ql,g as Kt,N as $t,D as Bn,i as He,h as Hl,A as Gl,b as Wl,E as Ql}from"./Trash-DEa9IH0a.js";function Xl(e){if(typeof e=="number")return{"":e.toString()};const l={};return e.split(/ +/).forEach(a=>{if(a==="")return;const[t,d]=a.split(":");d===void 0?l[""]=t:l[t]=d}),l}function dt(e,l){var a;if(e==null)return;const t=Xl(e);if(l===void 0)return t[""];if(typeof l=="string")return(a=t[l])!==null&&a!==void 0?a:t[""];if(Array.isArray(l)){for(let d=l.length-1;d>=0;--d){const o=l[d];if(o in t)return t[o]}return t[""]}else{let d,o=-1;return Object.keys(t).forEach(f=>{const r=Number(f);!Number.isNaN(r)&&l>=r&&r>=o&&(o=r,d=t[f])}),d}}const Yl={xs:0,s:640,m:1024,l:1280,xl:1536,"2xl":1920};function Jl(e){return`(min-width: ${e}px)`}const gt={};function Zl(e=Yl){if(!pl)return M(()=>[]);if(typeof window.matchMedia!="function")return M(()=>[]);const l=I({}),a=Object.keys(e),t=(d,o)=>{d.matches?l.value[o]=!0:l.value[o]=!1};return a.forEach(d=>{const o=e[d];let f,r;gt[o]===void 0?(f=window.matchMedia(Jl(o)),f.addEventListener?f.addEventListener("change",g=>{r.forEach(x=>{x(g,d)})}):f.addListener&&f.addListener(g=>{r.forEach(x=>{x(g,d)})}),r=new Set,gt[o]={mql:f,cbs:r}):(f=gt[o].mql,r=gt[o].cbs),r.add(t),f.matches&&r.forEach(g=>{g(f,d)})}),ml(()=>{a.forEach(d=>{const{cbs:o}=gt[e[d]];o.has(t)&&o.delete(t)})}),M(()=>{const{value:d}=l;return a.filter(o=>d[o])})}function Ln(e){return typeof e=="string"?`s-${e}`:`n-${e}`}function mn(e,l="default",a=[]){const{children:t}=e;if(t!==null&&typeof t=="object"&&!Array.isArray(t)){const d=t[l];if(typeof d=="function")return d()}return a}function ea(e){var l;const a=(l=e.dirs)===null||l===void 0?void 0:l.find(({dir:t})=>t===Cn);return!!(a&&a.value===!1)}const ta=ne({name:"Switcher",render(){return k("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},k("path",{d:"M12 8l10 8l-10 8z"}))}}),na={iconMargin:"11px 8px 0 12px",iconMarginRtl:"11px 12px 0 8px",iconSize:"24px",closeIconSize:"16px",closeSize:"20px",closeMargin:"13px 14px 0 0",closeMarginRtl:"13px 0 0 14px",padding:"13px"};function la(e){const{lineHeight:l,borderRadius:a,fontWeightStrong:t,baseColor:d,dividerColor:o,actionColor:f,textColor1:r,textColor2:g,closeColorHover:x,closeColorPressed:w,closeIconColor:S,closeIconColorHover:y,closeIconColorPressed:u,infoColor:p,successColor:m,warningColor:b,errorColor:i,fontSize:v}=e;return Object.assign(Object.assign({},na),{fontSize:v,lineHeight:l,titleFontWeight:t,borderRadius:a,border:`1px solid ${o}`,color:f,titleTextColor:r,iconColor:g,contentTextColor:g,closeBorderRadius:a,closeColorHover:x,closeColorPressed:w,closeIconColor:S,closeIconColorHover:y,closeIconColorPressed:u,borderInfo:`1px solid ${De(d,Oe(p,{alpha:.25}))}`,colorInfo:De(d,Oe(p,{alpha:.08})),titleTextColorInfo:r,iconColorInfo:p,contentTextColorInfo:g,closeColorHoverInfo:x,closeColorPressedInfo:w,closeIconColorInfo:S,closeIconColorHoverInfo:y,closeIconColorPressedInfo:u,borderSuccess:`1px solid ${De(d,Oe(m,{alpha:.25}))}`,colorSuccess:De(d,Oe(m,{alpha:.08})),titleTextColorSuccess:r,iconColorSuccess:m,contentTextColorSuccess:g,closeColorHoverSuccess:x,closeColorPressedSuccess:w,closeIconColorSuccess:S,closeIconColorHoverSuccess:y,closeIconColorPressedSuccess:u,borderWarning:`1px solid ${De(d,Oe(b,{alpha:.33}))}`,colorWarning:De(d,Oe(b,{alpha:.08})),titleTextColorWarning:r,iconColorWarning:b,contentTextColorWarning:g,closeColorHoverWarning:x,closeColorPressedWarning:w,closeIconColorWarning:S,closeIconColorHoverWarning:y,closeIconColorPressedWarning:u,borderError:`1px solid ${De(d,Oe(i,{alpha:.25}))}`,colorError:De(d,Oe(i,{alpha:.08})),titleTextColorError:r,iconColorError:i,contentTextColorError:g,closeColorHoverError:x,closeColorPressedError:w,closeIconColorError:S,closeIconColorHoverError:y,closeIconColorPressedError:u})}const aa={common:xt,self:la},ra=N("alert",`
 line-height: var(--n-line-height);
 border-radius: var(--n-border-radius);
 position: relative;
 transition: background-color .3s var(--n-bezier);
 background-color: var(--n-color);
 text-align: start;
 word-break: break-word;
`,[_("border",`
 border-radius: inherit;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 transition: border-color .3s var(--n-bezier);
 border: var(--n-border);
 pointer-events: none;
 `),V("closable",[N("alert-body",[_("title",`
 padding-right: 24px;
 `)])]),_("icon",{color:"var(--n-icon-color)"}),N("alert-body",{padding:"var(--n-padding)"},[_("title",{color:"var(--n-title-text-color)"}),_("content",{color:"var(--n-content-text-color)"})]),Qt({originalTransition:"transform .3s var(--n-bezier)",enterToProps:{transform:"scale(1)"},leaveToProps:{transform:"scale(0.9)"}}),_("icon",`
 position: absolute;
 left: 0;
 top: 0;
 align-items: center;
 justify-content: center;
 display: flex;
 width: var(--n-icon-size);
 height: var(--n-icon-size);
 font-size: var(--n-icon-size);
 margin: var(--n-icon-margin);
 `),_("close",`
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 position: absolute;
 right: 0;
 top: 0;
 margin: var(--n-close-margin);
 `),V("show-icon",[N("alert-body",{paddingLeft:"calc(var(--n-icon-margin-left) + var(--n-icon-size) + var(--n-icon-margin-right))"})]),V("right-adjust",[N("alert-body",{paddingRight:"calc(var(--n-close-size) + var(--n-padding) + 2px)"})]),N("alert-body",`
 border-radius: var(--n-border-radius);
 transition: border-color .3s var(--n-bezier);
 `,[_("title",`
 transition: color .3s var(--n-bezier);
 font-size: 16px;
 line-height: 19px;
 font-weight: var(--n-title-font-weight);
 `,[Q("& +",[_("content",{marginTop:"9px"})])]),_("content",{transition:"color .3s var(--n-bezier)",fontSize:"var(--n-font-size)"})]),_("icon",{transition:"color .3s var(--n-bezier)"})]),oa=Object.assign(Object.assign({},Me.props),{title:String,showIcon:{type:Boolean,default:!0},type:{type:String,default:"default"},bordered:{type:Boolean,default:!0},closable:Boolean,onClose:Function,onAfterLeave:Function,onAfterHide:Function}),Ze=ne({name:"Alert",inheritAttrs:!1,props:oa,slots:Object,setup(e){const{mergedClsPrefixRef:l,mergedBorderedRef:a,inlineThemeDisabled:t,mergedRtlRef:d}=et(e),o=Me("Alert","-alert",ra,aa,e,l),f=Sn("Alert",d,l),r=M(()=>{const{common:{cubicBezierEaseInOut:u},self:p}=o.value,{fontSize:m,borderRadius:b,titleFontWeight:i,lineHeight:v,iconSize:D,iconMargin:E,iconMarginRtl:q,closeIconSize:H,closeBorderRadius:W,closeSize:A,closeMargin:ae,closeMarginRtl:X,padding:he}=p,{type:$}=e,{left:P,right:R}=It(E);return{"--n-bezier":u,"--n-color":p[ve("color",$)],"--n-close-icon-size":H,"--n-close-border-radius":W,"--n-close-color-hover":p[ve("closeColorHover",$)],"--n-close-color-pressed":p[ve("closeColorPressed",$)],"--n-close-icon-color":p[ve("closeIconColor",$)],"--n-close-icon-color-hover":p[ve("closeIconColorHover",$)],"--n-close-icon-color-pressed":p[ve("closeIconColorPressed",$)],"--n-icon-color":p[ve("iconColor",$)],"--n-border":p[ve("border",$)],"--n-title-text-color":p[ve("titleTextColor",$)],"--n-content-text-color":p[ve("contentTextColor",$)],"--n-line-height":v,"--n-border-radius":b,"--n-font-size":m,"--n-title-font-weight":i,"--n-icon-size":D,"--n-icon-margin":E,"--n-icon-margin-rtl":q,"--n-close-size":A,"--n-close-margin":ae,"--n-close-margin-rtl":X,"--n-padding":he,"--n-icon-margin-left":P,"--n-icon-margin-right":R}}),g=t?kt("alert",M(()=>e.type[0]),r,e):void 0,x=I(!0),w=()=>{const{onAfterLeave:u,onAfterHide:p}=e;u&&u(),p&&p()};return{rtlEnabled:f,mergedClsPrefix:l,mergedBordered:a,visible:x,handleCloseClick:()=>{var u;Promise.resolve((u=e.onClose)===null||u===void 0?void 0:u.call(e)).then(p=>{p!==!1&&(x.value=!1)})},handleAfterLeave:()=>{w()},mergedTheme:o,cssVars:t?void 0:r,themeClass:g==null?void 0:g.themeClass,onRender:g==null?void 0:g.onRender}},render(){var e;return(e=this.onRender)===null||e===void 0||e.call(this),k(wn,{onAfterLeave:this.handleAfterLeave},{default:()=>{const{mergedClsPrefix:l,$slots:a}=this,t={class:[`${l}-alert`,this.themeClass,this.closable&&`${l}-alert--closable`,this.showIcon&&`${l}-alert--show-icon`,!this.title&&this.closable&&`${l}-alert--right-adjust`,this.rtlEnabled&&`${l}-alert--rtl`],style:this.cssVars,role:"alert"};return this.visible?k("div",Object.assign({},Xt(this.$attrs,t)),this.closable&&k(bl,{clsPrefix:l,class:`${l}-alert__close`,onClick:this.handleCloseClick}),this.bordered&&k("div",{class:`${l}-alert__border`}),this.showIcon&&k("div",{class:`${l}-alert__icon`,"aria-hidden":"true"},Yt(a.icon,()=>[k(Rn,{clsPrefix:l},{default:()=>{switch(this.type){case"success":return k(Cl,null);case"info":return k(kl,null);case"warning":return k(xl,null);case"error":return k(yl,null);default:return null}}})])),k("div",{class:[`${l}-alert-body`,this.mergedBordered&&`${l}-alert-body--bordered`]},Ge(a.header,d=>{const o=d||this.title;return o?k("div",{class:`${l}-alert-body__title`},o):null}),a.default&&k("div",{class:`${l}-alert-body__content`},a))):null}})}}),ia=N("input-group",`
 display: inline-flex;
 width: 100%;
 flex-wrap: nowrap;
 vertical-align: bottom;
`,[Q(">",[N("input",[Q("&:not(:last-child)",`
 border-top-right-radius: 0!important;
 border-bottom-right-radius: 0!important;
 `),Q("&:not(:first-child)",`
 border-top-left-radius: 0!important;
 border-bottom-left-radius: 0!important;
 margin-left: -1px!important;
 `)]),N("button",[Q("&:not(:last-child)",`
 border-top-right-radius: 0!important;
 border-bottom-right-radius: 0!important;
 `,[_("state-border, border",`
 border-top-right-radius: 0!important;
 border-bottom-right-radius: 0!important;
 `)]),Q("&:not(:first-child)",`
 border-top-left-radius: 0!important;
 border-bottom-left-radius: 0!important;
 `,[_("state-border, border",`
 border-top-left-radius: 0!important;
 border-bottom-left-radius: 0!important;
 `)])]),Q("*",[Q("&:not(:last-child)",`
 border-top-right-radius: 0!important;
 border-bottom-right-radius: 0!important;
 `,[Q(">",[N("input",`
 border-top-right-radius: 0!important;
 border-bottom-right-radius: 0!important;
 `),N("base-selection",[N("base-selection-label",`
 border-top-right-radius: 0!important;
 border-bottom-right-radius: 0!important;
 `),N("base-selection-tags",`
 border-top-right-radius: 0!important;
 border-bottom-right-radius: 0!important;
 `),_("box-shadow, border, state-border",`
 border-top-right-radius: 0!important;
 border-bottom-right-radius: 0!important;
 `)])])]),Q("&:not(:first-child)",`
 margin-left: -1px!important;
 border-top-left-radius: 0!important;
 border-bottom-left-radius: 0!important;
 `,[Q(">",[N("input",`
 border-top-left-radius: 0!important;
 border-bottom-left-radius: 0!important;
 `),N("base-selection",[N("base-selection-label",`
 border-top-left-radius: 0!important;
 border-bottom-left-radius: 0!important;
 `),N("base-selection-tags",`
 border-top-left-radius: 0!important;
 border-bottom-left-radius: 0!important;
 `),_("box-shadow, border, state-border",`
 border-top-left-radius: 0!important;
 border-bottom-left-radius: 0!important;
 `)])])])])])]),sa={},An=ne({name:"InputGroup",props:sa,setup(e){const{mergedClsPrefixRef:l}=et(e);return wl("-input-group",ia,l),{mergedClsPrefix:l}},render(){const{mergedClsPrefix:e}=this;return k("div",{class:`${e}-input-group`},this.$slots)}}),da={thPaddingBorderedSmall:"8px 12px",thPaddingBorderedMedium:"12px 16px",thPaddingBorderedLarge:"16px 24px",thPaddingSmall:"0",thPaddingMedium:"0",thPaddingLarge:"0",tdPaddingBorderedSmall:"8px 12px",tdPaddingBorderedMedium:"12px 16px",tdPaddingBorderedLarge:"16px 24px",tdPaddingSmall:"0 0 8px 0",tdPaddingMedium:"0 0 12px 0",tdPaddingLarge:"0 0 16px 0"};function ca(e){const{tableHeaderColor:l,textColor2:a,textColor1:t,cardColor:d,modalColor:o,popoverColor:f,dividerColor:r,borderRadius:g,fontWeightStrong:x,lineHeight:w,fontSizeSmall:S,fontSizeMedium:y,fontSizeLarge:u}=e;return Object.assign(Object.assign({},da),{lineHeight:w,fontSizeSmall:S,fontSizeMedium:y,fontSizeLarge:u,titleTextColor:t,thColor:De(d,l),thColorModal:De(o,l),thColorPopover:De(f,l),thTextColor:t,thFontWeight:x,tdTextColor:a,tdColor:d,tdColorModal:o,tdColorPopover:f,borderColor:De(d,r),borderColorModal:De(o,r),borderColorPopover:De(f,r),borderRadius:g})}const ua={common:xt,self:ca},fa=Q([N("descriptions",{fontSize:"var(--n-font-size)"},[N("descriptions-separator",`
 display: inline-block;
 margin: 0 8px 0 2px;
 `),N("descriptions-table-wrapper",[N("descriptions-table",[N("descriptions-table-row",[N("descriptions-table-header",{padding:"var(--n-th-padding)"}),N("descriptions-table-content",{padding:"var(--n-td-padding)"})])])]),Ke("bordered",[N("descriptions-table-wrapper",[N("descriptions-table",[N("descriptions-table-row",[Q("&:last-child",[N("descriptions-table-content",{paddingBottom:0})])])])])]),V("left-label-placement",[N("descriptions-table-content",[Q("> *",{verticalAlign:"top"})])]),V("left-label-align",[Q("th",{textAlign:"left"})]),V("center-label-align",[Q("th",{textAlign:"center"})]),V("right-label-align",[Q("th",{textAlign:"right"})]),V("bordered",[N("descriptions-table-wrapper",`
 border-radius: var(--n-border-radius);
 overflow: hidden;
 background: var(--n-merged-td-color);
 border: 1px solid var(--n-merged-border-color);
 `,[N("descriptions-table",[N("descriptions-table-row",[Q("&:not(:last-child)",[N("descriptions-table-content",{borderBottom:"1px solid var(--n-merged-border-color)"}),N("descriptions-table-header",{borderBottom:"1px solid var(--n-merged-border-color)"})]),N("descriptions-table-header",`
 font-weight: 400;
 background-clip: padding-box;
 background-color: var(--n-merged-th-color);
 `,[Q("&:not(:last-child)",{borderRight:"1px solid var(--n-merged-border-color)"})]),N("descriptions-table-content",[Q("&:not(:last-child)",{borderRight:"1px solid var(--n-merged-border-color)"})])])])])]),N("descriptions-header",`
 font-weight: var(--n-th-font-weight);
 font-size: 18px;
 transition: color .3s var(--n-bezier);
 line-height: var(--n-line-height);
 margin-bottom: 16px;
 color: var(--n-title-text-color);
 `),N("descriptions-table-wrapper",`
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[N("descriptions-table",`
 width: 100%;
 border-collapse: separate;
 border-spacing: 0;
 box-sizing: border-box;
 `,[N("descriptions-table-row",`
 box-sizing: border-box;
 transition: border-color .3s var(--n-bezier);
 `,[N("descriptions-table-header",`
 font-weight: var(--n-th-font-weight);
 line-height: var(--n-line-height);
 display: table-cell;
 box-sizing: border-box;
 color: var(--n-th-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `),N("descriptions-table-content",`
 vertical-align: top;
 line-height: var(--n-line-height);
 display: table-cell;
 box-sizing: border-box;
 color: var(--n-td-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[_("content",`
 transition: color .3s var(--n-bezier);
 display: inline-block;
 color: var(--n-td-text-color);
 `)]),_("label",`
 font-weight: var(--n-th-font-weight);
 transition: color .3s var(--n-bezier);
 display: inline-block;
 margin-right: 14px;
 color: var(--n-th-text-color);
 `)])])])]),N("descriptions-table-wrapper",`
 --n-merged-th-color: var(--n-th-color);
 --n-merged-td-color: var(--n-td-color);
 --n-merged-border-color: var(--n-border-color);
 `),Sl(N("descriptions-table-wrapper",`
 --n-merged-th-color: var(--n-th-color-modal);
 --n-merged-td-color: var(--n-td-color-modal);
 --n-merged-border-color: var(--n-border-color-modal);
 `)),Rl(N("descriptions-table-wrapper",`
 --n-merged-th-color: var(--n-th-color-popover);
 --n-merged-td-color: var(--n-td-color-popover);
 --n-merged-border-color: var(--n-border-color-popover);
 `))]),_n="DESCRIPTION_ITEM_FLAG";function ha(e){return typeof e=="object"&&e&&!Array.isArray(e)?e.type&&e.type[_n]:!1}const va=Object.assign(Object.assign({},Me.props),{title:String,column:{type:Number,default:3},columns:Number,labelPlacement:{type:String,default:"top"},labelAlign:{type:String,default:"left"},separator:{type:String,default:":"},size:{type:String,default:"medium"},bordered:Boolean,labelClass:String,labelStyle:[Object,String],contentClass:String,contentStyle:[Object,String]}),Pt=ne({name:"Descriptions",props:va,slots:Object,setup(e){const{mergedClsPrefixRef:l,inlineThemeDisabled:a}=et(e),t=Me("Descriptions","-descriptions",fa,ua,e,l),d=M(()=>{const{size:f,bordered:r}=e,{common:{cubicBezierEaseInOut:g},self:{titleTextColor:x,thColor:w,thColorModal:S,thColorPopover:y,thTextColor:u,thFontWeight:p,tdTextColor:m,tdColor:b,tdColorModal:i,tdColorPopover:v,borderColor:D,borderColorModal:E,borderColorPopover:q,borderRadius:H,lineHeight:W,[ve("fontSize",f)]:A,[ve(r?"thPaddingBordered":"thPadding",f)]:ae,[ve(r?"tdPaddingBordered":"tdPadding",f)]:X}}=t.value;return{"--n-title-text-color":x,"--n-th-padding":ae,"--n-td-padding":X,"--n-font-size":A,"--n-bezier":g,"--n-th-font-weight":p,"--n-line-height":W,"--n-th-text-color":u,"--n-td-text-color":m,"--n-th-color":w,"--n-th-color-modal":S,"--n-th-color-popover":y,"--n-td-color":b,"--n-td-color-modal":i,"--n-td-color-popover":v,"--n-border-radius":H,"--n-border-color":D,"--n-border-color-modal":E,"--n-border-color-popover":q}}),o=a?kt("descriptions",M(()=>{let f="";const{size:r,bordered:g}=e;return g&&(f+="a"),f+=r[0],f}),d,e):void 0;return{mergedClsPrefix:l,cssVars:a?void 0:d,themeClass:o==null?void 0:o.themeClass,onRender:o==null?void 0:o.onRender,compitableColumn:Tl(e,["columns","column"]),inlineThemeDisabled:a}},render(){const e=this.$slots.default,l=e?Tn(e()):[];l.length;const{contentClass:a,labelClass:t,compitableColumn:d,labelPlacement:o,labelAlign:f,size:r,bordered:g,title:x,cssVars:w,mergedClsPrefix:S,separator:y,onRender:u}=this;u==null||u();const p=l.filter(v=>ha(v)),m={span:0,row:[],secondRow:[],rows:[]},i=p.reduce((v,D,E)=>{const q=D.props||{},H=p.length-1===E,W=["label"in q?q.label:mn(D,"label")],A=[mn(D)],ae=q.span||1,X=v.span;v.span+=ae;const he=q.labelStyle||q["label-style"]||this.labelStyle,$=q.contentStyle||q["content-style"]||this.contentStyle;if(o==="left")g?v.row.push(k("th",{class:[`${S}-descriptions-table-header`,t],colspan:1,style:he},W),k("td",{class:[`${S}-descriptions-table-content`,a],colspan:H?(d-X)*2+1:ae*2-1,style:$},A)):v.row.push(k("td",{class:`${S}-descriptions-table-content`,colspan:H?(d-X)*2:ae*2},k("span",{class:[`${S}-descriptions-table-content__label`,t],style:he},[...W,y&&k("span",{class:`${S}-descriptions-separator`},y)]),k("span",{class:[`${S}-descriptions-table-content__content`,a],style:$},A)));else{const P=H?(d-X)*2:ae*2;v.row.push(k("th",{class:[`${S}-descriptions-table-header`,t],colspan:P,style:he},W)),v.secondRow.push(k("td",{class:[`${S}-descriptions-table-content`,a],colspan:P,style:$},A))}return(v.span>=d||H)&&(v.span=0,v.row.length&&(v.rows.push(v.row),v.row=[]),o!=="left"&&v.secondRow.length&&(v.rows.push(v.secondRow),v.secondRow=[])),v},m).rows.map(v=>k("tr",{class:`${S}-descriptions-table-row`},v));return k("div",{style:w,class:[`${S}-descriptions`,this.themeClass,`${S}-descriptions--${o}-label-placement`,`${S}-descriptions--${f}-label-align`,`${S}-descriptions--${r}-size`,g&&`${S}-descriptions--bordered`]},x||this.$slots.header?k("div",{class:`${S}-descriptions-header`},x||zn(this,"header")):null,k("div",{class:`${S}-descriptions-table-wrapper`},k("table",{class:`${S}-descriptions-table`},k("tbody",null,o==="top"&&k("tr",{class:`${S}-descriptions-table-row`,style:{visibility:"collapse"}},Nn(d*2,k("td",null))),i))))}}),ga={label:String,span:{type:Number,default:1},labelClass:String,labelStyle:[Object,String],contentClass:String,contentStyle:[Object,String]},Se=ne({name:"DescriptionsItem",[_n]:!0,props:ga,slots:Object,render(){return null}});function pa(e){const{textColor1:l,dividerColor:a,fontWeightStrong:t}=e;return{textColor:l,color:a,fontWeight:t}}const ma={common:xt,self:pa},ba=N("divider",`
 position: relative;
 display: flex;
 width: 100%;
 box-sizing: border-box;
 font-size: 16px;
 color: var(--n-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
`,[Ke("vertical",`
 margin-top: 24px;
 margin-bottom: 24px;
 `,[Ke("no-title",`
 display: flex;
 align-items: center;
 `)]),_("title",`
 display: flex;
 align-items: center;
 margin-left: 12px;
 margin-right: 12px;
 white-space: nowrap;
 font-weight: var(--n-font-weight);
 `),V("title-position-left",[_("line",[V("left",{width:"28px"})])]),V("title-position-right",[_("line",[V("right",{width:"28px"})])]),V("dashed",[_("line",`
 background-color: #0000;
 height: 0px;
 width: 100%;
 border-style: dashed;
 border-width: 1px 0 0;
 `)]),V("vertical",`
 display: inline-block;
 height: 1em;
 margin: 0 8px;
 vertical-align: middle;
 width: 1px;
 `),_("line",`
 border: none;
 transition: background-color .3s var(--n-bezier), border-color .3s var(--n-bezier);
 height: 1px;
 width: 100%;
 margin: 0;
 `),Ke("dashed",[_("line",{backgroundColor:"var(--n-color)"})]),V("dashed",[_("line",{borderColor:"var(--n-color)"})]),V("vertical",{backgroundColor:"var(--n-color)"})]),ya=Object.assign(Object.assign({},Me.props),{titlePlacement:{type:String,default:"center"},dashed:Boolean,vertical:Boolean}),Ue=ne({name:"Divider",props:ya,setup(e){const{mergedClsPrefixRef:l,inlineThemeDisabled:a}=et(e),t=Me("Divider","-divider",ba,ma,e,l),d=M(()=>{const{common:{cubicBezierEaseInOut:f},self:{color:r,textColor:g,fontWeight:x}}=t.value;return{"--n-bezier":f,"--n-color":r,"--n-text-color":g,"--n-font-weight":x}}),o=a?kt("divider",void 0,d,e):void 0;return{mergedClsPrefix:l,cssVars:a?void 0:d,themeClass:o==null?void 0:o.themeClass,onRender:o==null?void 0:o.onRender}},render(){var e;const{$slots:l,titlePlacement:a,vertical:t,dashed:d,cssVars:o,mergedClsPrefix:f}=this;return(e=this.onRender)===null||e===void 0||e.call(this),k("div",{role:"separator",class:[`${f}-divider`,this.themeClass,{[`${f}-divider--vertical`]:t,[`${f}-divider--no-title`]:!l.default,[`${f}-divider--dashed`]:d,[`${f}-divider--title-position-${a}`]:l.default&&a}],style:o},t?null:k("div",{class:`${f}-divider__line ${f}-divider__line--left`}),!t&&l.default?k(Re,null,k("div",{class:`${f}-divider__title`},this.$slots),k("div",{class:`${f}-divider__line ${f}-divider__line--right`})):null)}}),xa={buttonHeightSmall:"14px",buttonHeightMedium:"18px",buttonHeightLarge:"22px",buttonWidthSmall:"14px",buttonWidthMedium:"18px",buttonWidthLarge:"22px",buttonWidthPressedSmall:"20px",buttonWidthPressedMedium:"24px",buttonWidthPressedLarge:"28px",railHeightSmall:"18px",railHeightMedium:"22px",railHeightLarge:"26px",railWidthSmall:"32px",railWidthMedium:"40px",railWidthLarge:"48px"};function ka(e){const{primaryColor:l,opacityDisabled:a,borderRadius:t,textColor3:d}=e;return Object.assign(Object.assign({},xa),{iconColor:d,textColor:"white",loadingColor:l,opacityDisabled:a,railColor:"rgba(0, 0, 0, .14)",railColorActive:l,buttonBoxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",buttonColor:"#FFF",railBorderRadiusSmall:t,railBorderRadiusMedium:t,railBorderRadiusLarge:t,buttonBorderRadiusSmall:t,buttonBorderRadiusMedium:t,buttonBorderRadiusLarge:t,boxShadowFocus:`0 0 0 2px ${Oe(l,{alpha:.2})}`})}const Ca={common:xt,self:ka};function wa(e){const{borderRadiusSmall:l,dividerColor:a,hoverColor:t,pressedColor:d,primaryColor:o,textColor3:f,textColor2:r,textColorDisabled:g,fontSize:x}=e;return{fontSize:x,lineHeight:"1.5",nodeHeight:"30px",nodeWrapperPadding:"3px 0",nodeBorderRadius:l,nodeColorHover:t,nodeColorPressed:d,nodeColorActive:Oe(o,{alpha:.1}),arrowColor:f,nodeTextColor:r,nodeTextColorDisabled:g,loadingColor:o,dropMarkColor:o,lineColor:a}}const Sa=Nl({name:"Tree",common:xt,peers:{Checkbox:Vl,Scrollbar:Dl,Empty:Ll},self:wa}),bn=1,On=Zt("n-grid"),Fn=1,Ra={span:{type:[Number,String],default:Fn},offset:{type:[Number,String],default:0},suffix:Boolean,privateOffset:Number,privateSpan:Number,privateColStart:Number,privateShow:{type:Boolean,default:!0}},yn=ne({__GRID_ITEM__:!0,name:"GridItem",alias:["Gi"],props:Ra,setup(){const{isSsrRef:e,xGapRef:l,itemStyleRef:a,overflowRef:t,layoutShiftDisabledRef:d}=tt(On),o=$l();return{overflow:t,itemStyle:a,layoutShiftDisabled:d,mergedXGap:M(()=>_e(l.value||0)),deriveStyle:()=>{e.value;const{privateSpan:f=Fn,privateShow:r=!0,privateColStart:g=void 0,privateOffset:x=0}=o.vnode.props,{value:w}=l,S=_e(w||0);return{display:r?"":"none",gridColumn:`${g!=null?g:`span ${f}`} / span ${f}`,marginLeft:x?`calc((100% - (${f} - 1) * ${S}) / ${f} * ${x} + ${S} * ${x})`:""}}}},render(){var e,l;if(this.layoutShiftDisabled){const{span:a,offset:t,mergedXGap:d}=this;return k("div",{style:{gridColumn:`span ${a} / span ${a}`,marginLeft:t?`calc((100% - (${a} - 1) * ${d}) / ${a} * ${t} + ${d} * ${t})`:""}},this.$slots)}return k("div",{style:[this.itemStyle,this.deriveStyle()]},(l=(e=this.$slots).default)===null||l===void 0?void 0:l.call(e,{overflow:this.overflow}))}}),Ta={xs:0,s:640,m:1024,l:1280,xl:1536,xxl:1920},Mn=24,Gt="__ssr__",Na={layoutShiftDisabled:Boolean,responsive:{type:[String,Boolean],default:"self"},cols:{type:[Number,String],default:Mn},itemResponsive:Boolean,collapsed:Boolean,collapsedRows:{type:Number,default:1},itemStyle:[Object,String],xGap:{type:[Number,String],default:0},yGap:{type:[Number,String],default:0}},Da=ne({name:"Grid",inheritAttrs:!1,props:Na,setup(e){const{mergedClsPrefixRef:l,mergedBreakpointsRef:a}=et(e),t=/^\d+$/,d=I(void 0),o=Zl((a==null?void 0:a.value)||Ta),f=pe(()=>!!(e.itemResponsive||!t.test(e.cols.toString())||!t.test(e.xGap.toString())||!t.test(e.yGap.toString()))),r=M(()=>{if(f.value)return e.responsive==="self"?d.value:o.value}),g=pe(()=>{var i;return(i=Number(dt(e.cols.toString(),r.value)))!==null&&i!==void 0?i:Mn}),x=pe(()=>dt(e.xGap.toString(),r.value)),w=pe(()=>dt(e.yGap.toString(),r.value)),S=i=>{d.value=i.contentRect.width},y=i=>{Pl(S,i)},u=I(!1),p=M(()=>{if(e.responsive==="self")return y}),m=I(!1),b=I();return en(()=>{const{value:i}=b;i&&i.hasAttribute(Gt)&&(i.removeAttribute(Gt),m.value=!0)}),Dn(On,{layoutShiftDisabledRef:ee(e,"layoutShiftDisabled"),isSsrRef:m,itemStyleRef:ee(e,"itemStyle"),xGapRef:x,overflowRef:u}),{isSsr:!En,contentEl:b,mergedClsPrefix:l,style:M(()=>e.layoutShiftDisabled?{width:"100%",display:"grid",gridTemplateColumns:`repeat(${e.cols}, minmax(0, 1fr))`,columnGap:_e(e.xGap),rowGap:_e(e.yGap)}:{width:"100%",display:"grid",gridTemplateColumns:`repeat(${g.value}, minmax(0, 1fr))`,columnGap:_e(x.value),rowGap:_e(w.value)}),isResponsive:f,responsiveQuery:r,responsiveCols:g,handleResize:p,overflow:u}},render(){if(this.layoutShiftDisabled)return k("div",Xt({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style},this.$attrs),this.$slots);const e=()=>{var l,a,t,d,o,f,r;this.overflow=!1;const g=Tn(zn(this)),x=[],{collapsed:w,collapsedRows:S,responsiveCols:y,responsiveQuery:u}=this;g.forEach(v=>{var D,E,q,H,W;if(((D=v==null?void 0:v.type)===null||D===void 0?void 0:D.__GRID_ITEM__)!==!0)return;if(ea(v)){const X=fn(v);X.props?X.props.privateShow=!1:X.props={privateShow:!1},x.push({child:X,rawChildSpan:0});return}v.dirs=((E=v.dirs)===null||E===void 0?void 0:E.filter(({dir:X})=>X!==Cn))||null,((q=v.dirs)===null||q===void 0?void 0:q.length)===0&&(v.dirs=null);const A=fn(v),ae=Number((W=dt((H=A.props)===null||H===void 0?void 0:H.span,u))!==null&&W!==void 0?W:bn);ae!==0&&x.push({child:A,rawChildSpan:ae})});let p=0;const m=(l=x[x.length-1])===null||l===void 0?void 0:l.child;if(m!=null&&m.props){const v=(a=m.props)===null||a===void 0?void 0:a.suffix;v!==void 0&&v!==!1&&(p=Number((d=dt((t=m.props)===null||t===void 0?void 0:t.span,u))!==null&&d!==void 0?d:bn),m.props.privateSpan=p,m.props.privateColStart=y+1-p,m.props.privateShow=(o=m.props.privateShow)!==null&&o!==void 0?o:!0)}let b=0,i=!1;for(const{child:v,rawChildSpan:D}of x){if(i&&(this.overflow=!0),!i){const E=Number((r=dt((f=v.props)===null||f===void 0?void 0:f.offset,u))!==null&&r!==void 0?r:0),q=Math.min(D+E,y);if(v.props?(v.props.privateSpan=q,v.props.privateOffset=E):v.props={privateSpan:q,privateOffset:E},w){const H=b%y;q+H>y&&(b+=y-H),q+b+p>S*y?i=!0:b+=q}}i&&(v.props?v.props.privateShow!==!0&&(v.props.privateShow=!1):v.props={privateShow:!1})}return k("div",Xt({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style,[Gt]:this.isSsr||void 0},this.$attrs),x.map(({child:v})=>v))};return this.isResponsive&&this.responsive==="self"?k(Il,{onResize:this.handleResize},{default:e}):e()}}),$a=N("switch",`
 height: var(--n-height);
 min-width: var(--n-width);
 vertical-align: middle;
 user-select: none;
 -webkit-user-select: none;
 display: inline-flex;
 outline: none;
 justify-content: center;
 align-items: center;
`,[_("children-placeholder",`
 height: var(--n-rail-height);
 display: flex;
 flex-direction: column;
 overflow: hidden;
 pointer-events: none;
 visibility: hidden;
 `),_("rail-placeholder",`
 display: flex;
 flex-wrap: none;
 `),_("button-placeholder",`
 width: calc(1.75 * var(--n-rail-height));
 height: var(--n-rail-height);
 `),N("base-loading",`
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translateX(-50%) translateY(-50%);
 font-size: calc(var(--n-button-width) - 4px);
 color: var(--n-loading-color);
 transition: color .3s var(--n-bezier);
 `,[Jt({left:"50%",top:"50%",originalTransform:"translateX(-50%) translateY(-50%)"})]),_("checked, unchecked",`
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 box-sizing: border-box;
 position: absolute;
 white-space: nowrap;
 top: 0;
 bottom: 0;
 display: flex;
 align-items: center;
 line-height: 1;
 `),_("checked",`
 right: 0;
 padding-right: calc(1.25 * var(--n-rail-height) - var(--n-offset));
 `),_("unchecked",`
 left: 0;
 justify-content: flex-end;
 padding-left: calc(1.25 * var(--n-rail-height) - var(--n-offset));
 `),Q("&:focus",[_("rail",`
 box-shadow: var(--n-box-shadow-focus);
 `)]),V("round",[_("rail","border-radius: calc(var(--n-rail-height) / 2);",[_("button","border-radius: calc(var(--n-button-height) / 2);")])]),Ke("disabled",[Ke("icon",[V("rubber-band",[V("pressed",[_("rail",[_("button","max-width: var(--n-button-width-pressed);")])]),_("rail",[Q("&:active",[_("button","max-width: var(--n-button-width-pressed);")])]),V("active",[V("pressed",[_("rail",[_("button","left: calc(100% - var(--n-offset) - var(--n-button-width-pressed));")])]),_("rail",[Q("&:active",[_("button","left: calc(100% - var(--n-offset) - var(--n-button-width-pressed));")])])])])])]),V("active",[_("rail",[_("button","left: calc(100% - var(--n-button-width) - var(--n-offset))")])]),_("rail",`
 overflow: hidden;
 height: var(--n-rail-height);
 min-width: var(--n-rail-width);
 border-radius: var(--n-rail-border-radius);
 cursor: pointer;
 position: relative;
 transition:
 opacity .3s var(--n-bezier),
 background .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 background-color: var(--n-rail-color);
 `,[_("button-icon",`
 color: var(--n-icon-color);
 transition: color .3s var(--n-bezier);
 font-size: calc(var(--n-button-height) - 4px);
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 display: flex;
 justify-content: center;
 align-items: center;
 line-height: 1;
 `,[Jt()]),_("button",`
 align-items: center; 
 top: var(--n-offset);
 left: var(--n-offset);
 height: var(--n-button-height);
 width: var(--n-button-width-pressed);
 max-width: var(--n-button-width);
 border-radius: var(--n-button-border-radius);
 background-color: var(--n-button-color);
 box-shadow: var(--n-button-box-shadow);
 box-sizing: border-box;
 cursor: inherit;
 content: "";
 position: absolute;
 transition:
 background-color .3s var(--n-bezier),
 left .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 max-width .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 `)]),V("active",[_("rail","background-color: var(--n-rail-color-active);")]),V("loading",[_("rail",`
 cursor: wait;
 `)]),V("disabled",[_("rail",`
 cursor: not-allowed;
 opacity: .5;
 `)])]),Ia=Object.assign(Object.assign({},Me.props),{size:{type:String,default:"medium"},value:{type:[String,Number,Boolean],default:void 0},loading:Boolean,defaultValue:{type:[String,Number,Boolean],default:!1},disabled:{type:Boolean,default:void 0},round:{type:Boolean,default:!0},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],checkedValue:{type:[String,Number,Boolean],default:!0},uncheckedValue:{type:[String,Number,Boolean],default:!1},railStyle:Function,rubberBand:{type:Boolean,default:!0},onChange:[Function,Array]});let pt;const Pa=ne({name:"Switch",props:Ia,slots:Object,setup(e){pt===void 0&&(typeof CSS<"u"?typeof CSS.supports<"u"?pt=CSS.supports("width","max(1px)"):pt=!1:pt=!0);const{mergedClsPrefixRef:l,inlineThemeDisabled:a}=et(e),t=Me("Switch","-switch",$a,Ca,e,l),d=Al(e),{mergedSizeRef:o,mergedDisabledRef:f}=d,r=I(e.defaultValue),g=ee(e,"value"),x=mt(g,r),w=M(()=>x.value===e.checkedValue),S=I(!1),y=I(!1),u=M(()=>{const{railStyle:A}=e;if(A)return A({focused:y.value,checked:w.value})});function p(A){const{"onUpdate:value":ae,onChange:X,onUpdateValue:he}=e,{nTriggerFormInput:$,nTriggerFormChange:P}=d;ae&&ke(ae,A),he&&ke(he,A),X&&ke(X,A),r.value=A,$(),P()}function m(){const{nTriggerFormFocus:A}=d;A()}function b(){const{nTriggerFormBlur:A}=d;A()}function i(){e.loading||f.value||(x.value!==e.checkedValue?p(e.checkedValue):p(e.uncheckedValue))}function v(){y.value=!0,m()}function D(){y.value=!1,b(),S.value=!1}function E(A){e.loading||f.value||A.key===" "&&(x.value!==e.checkedValue?p(e.checkedValue):p(e.uncheckedValue),S.value=!1)}function q(A){e.loading||f.value||A.key===" "&&(A.preventDefault(),S.value=!0)}const H=M(()=>{const{value:A}=o,{self:{opacityDisabled:ae,railColor:X,railColorActive:he,buttonBoxShadow:$,buttonColor:P,boxShadowFocus:R,loadingColor:U,textColor:K,iconColor:ce,[ve("buttonHeight",A)]:J,[ve("buttonWidth",A)]:ue,[ve("buttonWidthPressed",A)]:Be,[ve("railHeight",A)]:ye,[ve("railWidth",A)]:Ve,[ve("railBorderRadius",A)]:B,[ve("buttonBorderRadius",A)]:Y},common:{cubicBezierEaseInOut:ie}}=t.value;let se,ge,je;return pt?(se=`calc((${ye} - ${J}) / 2)`,ge=`max(${ye}, ${J})`,je=`max(${Ve}, calc(${Ve} + ${J} - ${ye}))`):(se=_e((Ne(ye)-Ne(J))/2),ge=_e(Math.max(Ne(ye),Ne(J))),je=Ne(ye)>Ne(J)?Ve:_e(Ne(Ve)+Ne(J)-Ne(ye))),{"--n-bezier":ie,"--n-button-border-radius":Y,"--n-button-box-shadow":$,"--n-button-color":P,"--n-button-width":ue,"--n-button-width-pressed":Be,"--n-button-height":J,"--n-height":ge,"--n-offset":se,"--n-opacity-disabled":ae,"--n-rail-border-radius":B,"--n-rail-color":X,"--n-rail-color-active":he,"--n-rail-height":ye,"--n-rail-width":Ve,"--n-width":je,"--n-box-shadow-focus":R,"--n-loading-color":U,"--n-text-color":K,"--n-icon-color":ce}}),W=a?kt("switch",M(()=>o.value[0]),H,e):void 0;return{handleClick:i,handleBlur:D,handleFocus:v,handleKeyup:E,handleKeydown:q,mergedRailStyle:u,pressed:S,mergedClsPrefix:l,mergedValue:x,checked:w,mergedDisabled:f,cssVars:a?void 0:H,themeClass:W==null?void 0:W.themeClass,onRender:W==null?void 0:W.onRender}},render(){const{mergedClsPrefix:e,mergedDisabled:l,checked:a,mergedRailStyle:t,onRender:d,$slots:o}=this;d==null||d();const{checked:f,unchecked:r,icon:g,"checked-icon":x,"unchecked-icon":w}=o,S=!(jt(g)&&jt(x)&&jt(w));return k("div",{role:"switch","aria-checked":a,class:[`${e}-switch`,this.themeClass,S&&`${e}-switch--icon`,a&&`${e}-switch--active`,l&&`${e}-switch--disabled`,this.round&&`${e}-switch--round`,this.loading&&`${e}-switch--loading`,this.pressed&&`${e}-switch--pressed`,this.rubberBand&&`${e}-switch--rubber-band`],tabindex:this.mergedDisabled?void 0:0,style:this.cssVars,onClick:this.handleClick,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyup:this.handleKeyup,onKeydown:this.handleKeydown},k("div",{class:`${e}-switch__rail`,"aria-hidden":"true",style:t},Ge(f,y=>Ge(r,u=>y||u?k("div",{"aria-hidden":!0,class:`${e}-switch__children-placeholder`},k("div",{class:`${e}-switch__rail-placeholder`},k("div",{class:`${e}-switch__button-placeholder`}),y),k("div",{class:`${e}-switch__rail-placeholder`},k("div",{class:`${e}-switch__button-placeholder`}),u)):null)),k("div",{class:`${e}-switch__button`},Ge(g,y=>Ge(x,u=>Ge(w,p=>k($n,null,{default:()=>this.loading?k(In,{key:"loading",clsPrefix:e,strokeWidth:20}):this.checked&&(u||y)?k("div",{class:`${e}-switch__button-icon`,key:u?"checked-icon":"icon"},u||y):!this.checked&&(p||y)?k("div",{class:`${e}-switch__button-icon`,key:p?"unchecked-icon":"icon"},p||y):null})))),Ge(f,y=>y&&k("div",{key:"checked",class:`${e}-switch__checked`},y)),Ge(r,y=>y&&k("div",{key:"unchecked",class:`${e}-switch__unchecked`},y)))))}}),Vn=Zt("n-tree-select");function xn({position:e,offsetLevel:l,indent:a,el:t}){const d={position:"absolute",boxSizing:"border-box",right:0};if(e==="inside")d.left=0,d.top=0,d.bottom=0,d.borderRadius="inherit",d.boxShadow="inset 0 0 0 2px var(--n-drop-mark-color)";else{const o=e==="before"?"top":"bottom";d[o]=0,d.left=`${t.offsetLeft+6-l*a}px`,d.height="2px",d.backgroundColor="var(--n-drop-mark-color)",d.transformOrigin=o,d.borderRadius="1px",d.transform=e==="before"?"translateY(-4px)":"translateY(4px)"}return k("div",{style:d})}function za({dropPosition:e,node:l}){return l.isLeaf===!1||l.children?!0:e!=="inside"}const Ct=Zt("n-tree");function Ea({props:e,fNodesRef:l,mergedExpandedKeysRef:a,mergedSelectedKeysRef:t,mergedCheckedKeysRef:d,handleCheck:o,handleSelect:f,handleSwitcherClick:r}){const{value:g}=t,x=tt(Vn,null),w=x?x.pendingNodeKeyRef:I(g.length?g[g.length-1]:null);function S(y){var u;if(!e.keyboard)return{enterBehavior:null};const{value:p}=w;let m=null;if(p===null){if((y.key==="ArrowDown"||y.key==="ArrowUp")&&y.preventDefault(),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(y.key)&&p===null){const{value:b}=l;let i=0;for(;i<b.length;){if(!b[i].disabled){w.value=b[i].key;break}i+=1}}}else{const{value:b}=l;let i=b.findIndex(v=>v.key===p);if(!~i)return{enterBehavior:null};if(y.key==="Enter"){const v=b[i];switch(m=((u=e.overrideDefaultNodeClickBehavior)===null||u===void 0?void 0:u.call(e,{option:v.rawNode}))||null,m){case"toggleCheck":o(v,!d.value.includes(v.key));break;case"toggleSelect":f(v);break;case"toggleExpand":r(v);break;case"none":break;default:m="default",f(v)}}else if(y.key==="ArrowDown")for(y.preventDefault(),i+=1;i<b.length;){if(!b[i].disabled){w.value=b[i].key;break}i+=1}else if(y.key==="ArrowUp")for(y.preventDefault(),i-=1;i>=0;){if(!b[i].disabled){w.value=b[i].key;break}i-=1}else if(y.key==="ArrowLeft"){const v=b[i];if(v.isLeaf||!a.value.includes(p)){const D=v.getParent();D&&(w.value=D.key)}else r(v)}else if(y.key==="ArrowRight"){const v=b[i];if(v.isLeaf)return{enterBehavior:null};if(!a.value.includes(p))r(v);else for(i+=1;i<b.length;){if(!b[i].disabled){w.value=b[i].key;break}i+=1}}}return{enterBehavior:m}}return{pendingNodeKeyRef:w,handleKeydown:S}}const Ka=ne({name:"NTreeNodeCheckbox",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},right:Boolean,focusable:Boolean,disabled:Boolean,checked:Boolean,indeterminate:Boolean,onCheck:Function},setup(e){const l=tt(Ct);function a(d){const{onCheck:o}=e;o&&o(d)}function t(d){a(d)}return{handleUpdateValue:t,mergedTheme:l.mergedThemeRef}},render(){const{clsPrefix:e,mergedTheme:l,checked:a,indeterminate:t,disabled:d,focusable:o,indent:f,handleUpdateValue:r}=this;return k("span",{class:[`${e}-tree-node-checkbox`,this.right&&`${e}-tree-node-checkbox--right`],style:{width:`${f}px`},"data-checkbox":!0},k(ln,{focusable:o,disabled:d,theme:l.peers.Checkbox,themeOverrides:l.peerOverrides.Checkbox,checked:a,indeterminate:t,onUpdateChecked:r}))}}),Ba=ne({name:"TreeNodeContent",props:{clsPrefix:{type:String,required:!0},disabled:Boolean,checked:Boolean,selected:Boolean,onClick:Function,onDragstart:Function,tmNode:{type:Object,required:!0},nodeProps:Object},setup(e){const{renderLabelRef:l,renderPrefixRef:a,renderSuffixRef:t,labelFieldRef:d}=tt(Ct),o=I(null);function f(g){const{onClick:x}=e;x&&x(g)}function r(g){f(g)}return{selfRef:o,renderLabel:l,renderPrefix:a,renderSuffix:t,labelField:d,handleClick:r}},render(){const{clsPrefix:e,labelField:l,nodeProps:a,checked:t=!1,selected:d=!1,renderLabel:o,renderPrefix:f,renderSuffix:r,handleClick:g,onDragstart:x,tmNode:{rawNode:w,rawNode:{prefix:S,suffix:y,[l]:u}}}=this;return k("span",Object.assign({},a,{ref:"selfRef",class:[`${e}-tree-node-content`,a==null?void 0:a.class],onClick:g,draggable:x===void 0?void 0:!0,onDragstart:x}),f||S?k("div",{class:`${e}-tree-node-content__prefix`},f?f({option:w,selected:d,checked:t}):qt(S)):null,k("div",{class:`${e}-tree-node-content__text`},o?o({option:w,selected:d,checked:t}):qt(u)),r||y?k("div",{class:`${e}-tree-node-content__suffix`},r?r({option:w,selected:d,checked:t}):qt(y)):null)}}),La=ne({name:"NTreeSwitcher",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},expanded:Boolean,selected:Boolean,hide:Boolean,loading:Boolean,onClick:Function,tmNode:{type:Object,required:!0}},setup(e){const{renderSwitcherIconRef:l}=tt(Ct,null);return()=>{const{clsPrefix:a,expanded:t,hide:d,indent:o,onClick:f}=e;return k("span",{"data-switcher":!0,class:[`${a}-tree-node-switcher`,t&&`${a}-tree-node-switcher--expanded`,d&&`${a}-tree-node-switcher--hide`],style:{width:`${o}px`},onClick:f},k("div",{class:`${a}-tree-node-switcher__icon`},k($n,null,{default:()=>{if(e.loading)return k(In,{clsPrefix:a,key:"loading",radius:85,strokeWidth:20});const{value:r}=l;return r?r({expanded:e.expanded,selected:e.selected,option:e.tmNode.rawNode}):k(Rn,{clsPrefix:a,key:"switcher"},{default:()=>k(ta,null)})}})))}}});function Aa(e){return M(()=>e.leafOnly?"child":e.checkStrategy)}function We(e,l){return!!e.rawNode[l]}function Un(e,l,a,t){e==null||e.forEach(d=>{a(d),Un(d[l],l,a,t),t(d)})}function _a(e,l,a,t,d){const o=new Set,f=new Set,r=[];return Un(e,t,g=>{if(r.push(g),d(l,g)){f.add(g[a]);for(let x=r.length-2;x>=0;--x)if(!o.has(r[x][a]))o.add(r[x][a]);else return}},()=>{r.pop()}),{expandedKeys:Array.from(o),highlightKeySet:f}}if(En&&Image){const e=new Image;e.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}function Oa(e,l,a,t,d){const o=new Set,f=new Set,r=new Set,g=[],x=[],w=[];function S(u){u.forEach(p=>{if(w.push(p),l(a,p)){o.add(p[t]),r.add(p[t]);for(let b=w.length-2;b>=0;--b){const i=w[b][t];if(!f.has(i))f.add(i),o.has(i)&&o.delete(i);else break}}const m=p[d];m&&S(m),w.pop()})}S(e);function y(u,p){u.forEach(m=>{const b=m[t],i=o.has(b),v=f.has(b);if(!i&&!v)return;const D=m[d];if(D)if(i)p.push(m);else{g.push(b);const E=Object.assign(Object.assign({},m),{[d]:[]});p.push(E),y(D,E[d])}else p.push(m)})}return y(e,x),{filteredTree:x,highlightKeySet:r,expandedKeys:g}}const jn=ne({name:"TreeNode",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const l=tt(Ct),{droppingNodeParentRef:a,droppingMouseNodeRef:t,draggingNodeRef:d,droppingPositionRef:o,droppingOffsetLevelRef:f,nodePropsRef:r,indentRef:g,blockLineRef:x,checkboxPlacementRef:w,checkOnClickRef:S,disabledFieldRef:y,showLineRef:u,renderSwitcherIconRef:p,overrideDefaultNodeClickBehaviorRef:m}=l,b=pe(()=>!!e.tmNode.rawNode.checkboxDisabled),i=pe(()=>We(e.tmNode,y.value)),v=pe(()=>l.disabledRef.value||i.value),D=M(()=>{const{value:B}=r;if(B)return B({option:e.tmNode.rawNode})}),E=I(null),q={value:null};en(()=>{q.value=E.value.$el});function H(){const B=()=>{const{tmNode:Y}=e;if(!Y.isLeaf&&!Y.shallowLoaded){if(!l.loadingKeysRef.value.has(Y.key))l.loadingKeysRef.value.add(Y.key);else return;const{onLoadRef:{value:ie}}=l;ie&&ie(Y.rawNode).then(se=>{se!==!1&&l.handleSwitcherClick(Y)}).finally(()=>{l.loadingKeysRef.value.delete(Y.key)})}else l.handleSwitcherClick(Y)};p.value?setTimeout(B,0):B()}const W=pe(()=>!i.value&&l.selectableRef.value&&(l.internalTreeSelect?l.mergedCheckStrategyRef.value!=="child"||l.multipleRef.value&&l.cascadeRef.value||e.tmNode.isLeaf:!0)),A=pe(()=>l.checkableRef.value&&(l.cascadeRef.value||l.mergedCheckStrategyRef.value!=="child"||e.tmNode.isLeaf)),ae=pe(()=>l.displayedCheckedKeysRef.value.includes(e.tmNode.key)),X=pe(()=>{const{value:B}=A;if(!B)return!1;const{value:Y}=S,{tmNode:ie}=e;return typeof Y=="boolean"?!ie.disabled&&Y:Y(e.tmNode.rawNode)});function he(B){const{value:Y}=l.expandOnClickRef,{value:ie}=W,{value:se}=X;if(!ie&&!Y&&!se||Nt(B,"checkbox")||Nt(B,"switcher"))return;const{tmNode:ge}=e;ie&&l.handleSelect(ge),Y&&!ge.isLeaf&&H(),se&&U(!ae.value)}function $(B){var Y,ie;if(!(Nt(B,"checkbox")||Nt(B,"switcher"))){if(!v.value){const se=m.value;let ge=!1;if(se)switch(se({option:e.tmNode.rawNode})){case"toggleCheck":ge=!0,U(!ae.value);break;case"toggleSelect":ge=!0,l.handleSelect(e.tmNode);break;case"toggleExpand":ge=!0,H(),ge=!0;break;case"none":ge=!0,ge=!0;return}ge||he(B)}(ie=(Y=D.value)===null||Y===void 0?void 0:Y.onClick)===null||ie===void 0||ie.call(Y,B)}}function P(B){x.value||$(B)}function R(B){x.value&&$(B)}function U(B){l.handleCheck(e.tmNode,B)}function K(B){l.handleDragStart({event:B,node:e.tmNode})}function ce(B){B.currentTarget===B.target&&l.handleDragEnter({event:B,node:e.tmNode})}function J(B){B.preventDefault(),l.handleDragOver({event:B,node:e.tmNode})}function ue(B){l.handleDragEnd({event:B,node:e.tmNode})}function Be(B){B.currentTarget===B.target&&l.handleDragLeave({event:B,node:e.tmNode})}function ye(B){B.preventDefault(),o.value!==null&&l.handleDrop({event:B,node:e.tmNode,dropPosition:o.value})}const Ve=M(()=>{const{clsPrefix:B}=e,{value:Y}=g;if(u.value){const ie=[];let se=e.tmNode.parent;for(;se;)se.isLastChild?ie.push(k("div",{class:`${B}-tree-node-indent`},k("div",{style:{width:`${Y}px`}}))):ie.push(k("div",{class:[`${B}-tree-node-indent`,`${B}-tree-node-indent--show-line`]},k("div",{style:{width:`${Y}px`}}))),se=se.parent;return ie.reverse()}else return Nn(e.tmNode.level,k("div",{class:`${e.clsPrefix}-tree-node-indent`},k("div",{style:{width:`${Y}px`}})))});return{showDropMark:pe(()=>{const{value:B}=d;if(!B)return;const{value:Y}=o;if(!Y)return;const{value:ie}=t;if(!ie)return;const{tmNode:se}=e;return se.key===ie.key}),showDropMarkAsParent:pe(()=>{const{value:B}=a;if(!B)return!1;const{tmNode:Y}=e,{value:ie}=o;return ie==="before"||ie==="after"?B.key===Y.key:!1}),pending:pe(()=>l.pendingNodeKeyRef.value===e.tmNode.key),loading:pe(()=>l.loadingKeysRef.value.has(e.tmNode.key)),highlight:pe(()=>{var B;return(B=l.highlightKeySetRef.value)===null||B===void 0?void 0:B.has(e.tmNode.key)}),checked:ae,indeterminate:pe(()=>l.displayedIndeterminateKeysRef.value.includes(e.tmNode.key)),selected:pe(()=>l.mergedSelectedKeysRef.value.includes(e.tmNode.key)),expanded:pe(()=>l.mergedExpandedKeysRef.value.includes(e.tmNode.key)),disabled:v,checkable:A,mergedCheckOnClick:X,checkboxDisabled:b,selectable:W,expandOnClick:l.expandOnClickRef,internalScrollable:l.internalScrollableRef,draggable:l.draggableRef,blockLine:x,nodeProps:D,checkboxFocusable:l.internalCheckboxFocusableRef,droppingPosition:o,droppingOffsetLevel:f,indent:g,checkboxPlacement:w,showLine:u,contentInstRef:E,contentElRef:q,indentNodes:Ve,handleCheck:U,handleDrop:ye,handleDragStart:K,handleDragEnter:ce,handleDragOver:J,handleDragEnd:ue,handleDragLeave:Be,handleLineClick:R,handleContentClick:P,handleSwitcherClick:H}},render(){const{tmNode:e,clsPrefix:l,checkable:a,expandOnClick:t,selectable:d,selected:o,checked:f,highlight:r,draggable:g,blockLine:x,indent:w,indentNodes:S,disabled:y,pending:u,internalScrollable:p,nodeProps:m,checkboxPlacement:b}=this,i=g&&!y?{onDragenter:this.handleDragEnter,onDragleave:this.handleDragLeave,onDragend:this.handleDragEnd,onDrop:this.handleDrop,onDragover:this.handleDragOver}:void 0,v=p?Ln(e.key):void 0,D=b==="right",E=a?k(Ka,{indent:w,right:D,focusable:this.checkboxFocusable,disabled:y||this.checkboxDisabled,clsPrefix:l,checked:this.checked,indeterminate:this.indeterminate,onCheck:this.handleCheck}):null;return k("div",Object.assign({class:`${l}-tree-node-wrapper`},i),k("div",Object.assign({},x?m:void 0,{class:[`${l}-tree-node`,{[`${l}-tree-node--selected`]:o,[`${l}-tree-node--checkable`]:a,[`${l}-tree-node--highlight`]:r,[`${l}-tree-node--pending`]:u,[`${l}-tree-node--disabled`]:y,[`${l}-tree-node--selectable`]:d,[`${l}-tree-node--clickable`]:d||t||this.mergedCheckOnClick},m==null?void 0:m.class],"data-key":v,draggable:g&&x,onClick:this.handleLineClick,onDragstart:g&&x&&!y?this.handleDragStart:void 0}),S,e.isLeaf&&this.showLine?k("div",{class:[`${l}-tree-node-indent`,`${l}-tree-node-indent--show-line`,e.isLeaf&&`${l}-tree-node-indent--is-leaf`,e.isLastChild&&`${l}-tree-node-indent--last-child`]},k("div",{style:{width:`${w}px`}})):k(La,{clsPrefix:l,expanded:this.expanded,selected:o,loading:this.loading,hide:e.isLeaf,tmNode:this.tmNode,indent:w,onClick:this.handleSwitcherClick}),D?null:E,k(Ba,{ref:"contentInstRef",clsPrefix:l,checked:f,selected:o,onClick:this.handleContentClick,nodeProps:x?void 0:m,onDragstart:g&&!x&&!y?this.handleDragStart:void 0,tmNode:e}),g?this.showDropMark?xn({el:this.contentElRef.value,position:this.droppingPosition,offsetLevel:this.droppingOffsetLevel,indent:w}):this.showDropMarkAsParent?xn({el:this.contentElRef.value,position:"inside",offsetLevel:this.droppingOffsetLevel,indent:w}):null:null,D?E:null))}}),Fa=ne({name:"TreeMotionWrapper",props:{clsPrefix:{type:String,required:!0},height:Number,nodes:{type:Array,required:!0},mode:{type:String,required:!0},onAfterEnter:{type:Function,required:!0}},render(){const{clsPrefix:e}=this;return k(wn,{onAfterEnter:this.onAfterEnter,appear:!0,reverse:this.mode==="collapse"},{default:()=>k("div",{class:[`${e}-tree-motion-wrapper`,`${e}-tree-motion-wrapper--${this.mode}`],style:{height:_e(this.height)}},this.nodes.map(l=>k(jn,{clsPrefix:e,tmNode:l})))})}}),Wt=Jt(),Ma=N("tree",`
 font-size: var(--n-font-size);
 outline: none;
`,[Q("ul, li",`
 margin: 0;
 padding: 0;
 list-style: none;
 `),Q(">",[N("tree-node",[Q("&:first-child","margin-top: 0;")])]),N("tree-motion-wrapper",[V("expand",[Qt({duration:"0.2s"})]),V("collapse",[Qt({duration:"0.2s",reverse:!0})])]),N("tree-node-wrapper",`
 box-sizing: border-box;
 padding: var(--n-node-wrapper-padding);
 `),N("tree-node",`
 position: relative;
 display: flex;
 border-radius: var(--n-node-border-radius);
 transition: background-color .3s var(--n-bezier);
 `,[V("highlight",[N("tree-node-content",[_("text","border-bottom-color: var(--n-node-text-color-disabled);")])]),V("disabled",[N("tree-node-content",`
 color: var(--n-node-text-color-disabled);
 cursor: not-allowed;
 `)]),Ke("disabled",[V("clickable",[N("tree-node-content",`
 cursor: pointer;
 `)])])]),V("block-node",[N("tree-node-content",`
 flex: 1;
 min-width: 0;
 `)]),Ke("block-line",[N("tree-node",[Ke("disabled",[N("tree-node-content",[Q("&:hover","background: var(--n-node-color-hover);")]),V("selectable",[N("tree-node-content",[Q("&:active","background: var(--n-node-color-pressed);")])]),V("pending",[N("tree-node-content",`
 background: var(--n-node-color-hover);
 `)]),V("selected",[N("tree-node-content","background: var(--n-node-color-active);")])]),V("selected",[N("tree-node-content","background: var(--n-node-color-active);")])])]),V("block-line",[N("tree-node",[Ke("disabled",[Q("&:hover","background: var(--n-node-color-hover);"),V("pending",`
 background: var(--n-node-color-hover);
 `),V("selectable",[Ke("selected",[Q("&:active","background: var(--n-node-color-pressed);")])]),V("selected","background: var(--n-node-color-active);")]),V("selected","background: var(--n-node-color-active);"),V("disabled",`
 cursor: not-allowed;
 `)])]),V("ellipsis",[N("tree-node",[N("tree-node-content",`
 overflow: hidden;
 `,[_("text",`
 text-overflow: ellipsis;
 white-space: nowrap;
 overflow: hidden;
 `)])])]),N("tree-node-indent",`
 flex-grow: 0;
 flex-shrink: 0;
 `,[V("show-line","position: relative",[Q("&::before",`
 position: absolute;
 left: 50%;
 border-left: 1px solid var(--n-line-color);
 transition: border-color .3s var(--n-bezier);
 transform: translate(-50%);
 content: "";
 top: var(--n-line-offset-top);
 bottom: var(--n-line-offset-bottom);
 `),V("last-child",[Q("&::before",`
 bottom: 50%;
 `)]),V("is-leaf",[Q("&::after",`
 position: absolute;
 content: "";
 left: calc(50% + 0.5px);
 right: 0;
 bottom: 50%;
 transition: border-color .3s var(--n-bezier);
 border-bottom: 1px solid var(--n-line-color);
 `)])]),Ke("show-line","height: 0;")]),N("tree-node-switcher",`
 cursor: pointer;
 display: inline-flex;
 flex-shrink: 0;
 height: var(--n-node-content-height);
 align-items: center;
 justify-content: center;
 transition: transform .15s var(--n-bezier);
 vertical-align: bottom;
 `,[_("icon",`
 position: relative;
 height: 14px;
 width: 14px;
 display: flex;
 color: var(--n-arrow-color);
 transition: color .3s var(--n-bezier);
 font-size: 14px;
 `,[N("icon",[Wt]),N("base-loading",`
 color: var(--n-loading-color);
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 `,[Wt]),N("base-icon",[Wt])]),V("hide","visibility: hidden;"),V("expanded","transform: rotate(90deg);")]),N("tree-node-checkbox",`
 display: inline-flex;
 height: var(--n-node-content-height);
 vertical-align: bottom;
 align-items: center;
 justify-content: center;
 `),N("tree-node-content",`
 user-select: none;
 position: relative;
 display: inline-flex;
 align-items: center;
 min-height: var(--n-node-content-height);
 box-sizing: border-box;
 line-height: var(--n-line-height);
 vertical-align: bottom;
 padding: 0 6px 0 4px;
 cursor: default;
 border-radius: var(--n-node-border-radius);
 color: var(--n-node-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[Q("&:last-child","margin-bottom: 0;"),_("prefix",`
 display: inline-flex;
 margin-right: 8px;
 `),_("text",`
 border-bottom: 1px solid #0000;
 transition: border-color .3s var(--n-bezier);
 flex-grow: 1;
 max-width: 100%;
 `),_("suffix",`
 display: inline-flex;
 `)]),_("empty","margin: auto;")]);var Va=function(e,l,a,t){function d(o){return o instanceof a?o:new a(function(f){f(o)})}return new(a||(a=Promise))(function(o,f){function r(w){try{x(t.next(w))}catch(S){f(S)}}function g(w){try{x(t.throw(w))}catch(S){f(S)}}function x(w){w.done?o(w.value):d(w.value).then(r,g)}x((t=t.apply(e,[])).next())})};function kn(e,l,a,t){return{getIsGroup(){return!1},getKey(o){return o[e]},getChildren:t||(o=>o[l]),getDisabled(o){return!!(o[a]||o.checkboxDisabled)}}}const Ua={allowCheckingNotLoaded:Boolean,filter:Function,defaultExpandAll:Boolean,expandedKeys:Array,keyField:{type:String,default:"key"},labelField:{type:String,default:"label"},childrenField:{type:String,default:"children"},disabledField:{type:String,default:"disabled"},defaultExpandedKeys:{type:Array,default:()=>[]},indent:{type:Number,default:24},indeterminateKeys:Array,renderSwitcherIcon:Function,onUpdateIndeterminateKeys:[Function,Array],"onUpdate:indeterminateKeys":[Function,Array],onUpdateExpandedKeys:[Function,Array],"onUpdate:expandedKeys":[Function,Array],overrideDefaultNodeClickBehavior:Function},ja=Object.assign(Object.assign(Object.assign(Object.assign({},Me.props),{accordion:Boolean,showIrrelevantNodes:{type:Boolean,default:!0},data:{type:Array,default:()=>[]},expandOnDragenter:{type:Boolean,default:!0},expandOnClick:Boolean,checkOnClick:{type:[Boolean,Function],default:!1},cancelable:{type:Boolean,default:!0},checkable:Boolean,draggable:Boolean,blockNode:Boolean,blockLine:Boolean,showLine:Boolean,disabled:Boolean,checkedKeys:Array,defaultCheckedKeys:{type:Array,default:()=>[]},selectedKeys:Array,defaultSelectedKeys:{type:Array,default:()=>[]},multiple:Boolean,pattern:{type:String,default:""},onLoad:Function,cascade:Boolean,selectable:{type:Boolean,default:!0},scrollbarProps:Object,allowDrop:{type:Function,default:za},animated:{type:Boolean,default:!0},ellipsis:Boolean,checkboxPlacement:{type:String,default:"left"},virtualScroll:Boolean,watchProps:Array,renderLabel:Function,renderPrefix:Function,renderSuffix:Function,nodeProps:Function,keyboard:{type:Boolean,default:!0},getChildren:Function,onDragenter:[Function,Array],onDragleave:[Function,Array],onDragend:[Function,Array],onDragstart:[Function,Array],onDragover:[Function,Array],onDrop:[Function,Array],onUpdateCheckedKeys:[Function,Array],"onUpdate:checkedKeys":[Function,Array],onUpdateSelectedKeys:[Function,Array],"onUpdate:selectedKeys":[Function,Array]}),Ua),{internalTreeSelect:Boolean,internalScrollable:Boolean,internalScrollablePadding:String,internalRenderEmpty:Function,internalHighlightKeySet:Object,internalUnifySelectCheck:Boolean,internalCheckboxFocusable:{type:Boolean,default:!0},internalFocusable:{type:Boolean,default:!0},checkStrategy:{type:String,default:"all"},leafOnly:Boolean}),Bt=ne({name:"Tree",props:ja,slots:Object,setup(e){const{mergedClsPrefixRef:l,inlineThemeDisabled:a,mergedRtlRef:t}=et(e),d=Sn("Tree",t,l),o=Me("Tree","-tree",Ma,Sa,e,l),f=I(null),r=I(null),g=I(null);function x(){var h;return(h=g.value)===null||h===void 0?void 0:h.listElRef}function w(){var h;return(h=g.value)===null||h===void 0?void 0:h.itemsElRef}const S=M(()=>{const{filter:h}=e;if(h)return h;const{labelField:C}=e;return(T,L)=>{if(!T.length)return!0;const O=L[C];return typeof O=="string"?O.toLowerCase().includes(T.toLowerCase()):!1}}),y=M(()=>{const{pattern:h}=e;return h?!h.length||!S.value?{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}:Oa(e.data,S.value,h,e.keyField,e.childrenField):{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}}),u=M(()=>vn(e.showIrrelevantNodes?e.data:y.value.filteredTree,kn(e.keyField,e.childrenField,e.disabledField,e.getChildren))),p=tt(Vn,null),m=e.internalTreeSelect?p.dataTreeMate:M(()=>e.showIrrelevantNodes?u.value:vn(e.data,kn(e.keyField,e.childrenField,e.disabledField,e.getChildren))),{watchProps:b}=e,i=I([]);b!=null&&b.includes("defaultCheckedKeys")?vt(()=>{i.value=e.defaultCheckedKeys}):i.value=e.defaultCheckedKeys;const v=ee(e,"checkedKeys"),D=mt(v,i),E=M(()=>m.value.getCheckedKeys(D.value,{cascade:e.cascade,allowNotLoaded:e.allowCheckingNotLoaded})),q=Aa(e),H=M(()=>E.value.checkedKeys),W=M(()=>{const{indeterminateKeys:h}=e;return h!==void 0?h:E.value.indeterminateKeys}),A=I([]);b!=null&&b.includes("defaultSelectedKeys")?vt(()=>{A.value=e.defaultSelectedKeys}):A.value=e.defaultSelectedKeys;const ae=ee(e,"selectedKeys"),X=mt(ae,A),he=I([]),$=h=>{he.value=e.defaultExpandAll?m.value.getNonLeafKeys():h===void 0?e.defaultExpandedKeys:h};b!=null&&b.includes("defaultExpandedKeys")?vt(()=>{$(void 0)}):vt(()=>{$(e.defaultExpandedKeys)});const P=ee(e,"expandedKeys"),R=mt(P,he),U=M(()=>u.value.getFlattenedNodes(R.value)),{pendingNodeKeyRef:K,handleKeydown:ce}=Ea({props:e,mergedCheckedKeysRef:D,mergedSelectedKeysRef:X,fNodesRef:U,mergedExpandedKeysRef:R,handleCheck:Mt,handleSelect:Vt,handleSwitcherClick:on});let J=null,ue=null;const Be=I(new Set),ye=M(()=>e.internalHighlightKeySet||y.value.highlightKeySet),Ve=mt(ye,Be),B=I(new Set),Y=M(()=>R.value.filter(h=>!B.value.has(h)));let ie=0;const se=I(null),ge=I(null),je=I(null),wt=I(null),St=I(0),qn=M(()=>{const{value:h}=ge;return h?h.parent:null});let At=!1;be(ee(e,"data"),()=>{At=!0,Xe(()=>{At=!1}),B.value.clear(),K.value=null,ht()},{deep:!1});let _t=!1;const Ot=()=>{_t=!0,Xe(()=>{_t=!1})};let ft;be(ee(e,"pattern"),(h,C)=>{if(e.showIrrelevantNodes)if(ft=void 0,h){const{expandedKeys:T,highlightKeySet:L}=_a(e.data,e.pattern,e.keyField,e.childrenField,S.value);Be.value=L,Ot(),lt(T,$e(T),{node:null,action:"filter"})}else Be.value=new Set;else if(!h.length)ft!==void 0&&(Ot(),lt(ft,$e(ft),{node:null,action:"filter"}));else{C.length||(ft=R.value);const{expandedKeys:T}=y.value;T!==void 0&&(Ot(),lt(T,$e(T),{node:null,action:"filter"}))}});function an(h){return Va(this,void 0,void 0,function*(){const{onLoad:C}=e;if(!C){yield Promise.resolve();return}const{value:T}=B;if(!T.has(h.key)){T.add(h.key);try{(yield C(h.rawNode))===!1&&at()}catch(L){console.error(L),at()}T.delete(h.key)}})}vt(()=>{var h;const{value:C}=u;if(!C)return;const{getNode:T}=C;(h=R.value)===null||h===void 0||h.forEach(L=>{const O=T(L);O&&!O.shallowLoaded&&an(O)})});const nt=I(!1),qe=I([]);be(Y,(h,C)=>{if(!e.animated||_t){Xe(Rt);return}if(At)return;const T=Ne(o.value.self.nodeHeight),L=new Set(C);let O=null,de=null;for(const re of h)if(!L.has(re)){if(O!==null)return;O=re}const Te=new Set(h);for(const re of C)if(!Te.has(re)){if(de!==null)return;de=re}if(O===null&&de===null)return;const{virtualScroll:Ie}=e,ot=(Ie?g.value.listElRef:f.value).offsetHeight,it=Math.ceil(ot/T)+1;let ze;if(O!==null&&(ze=C),de!==null&&(ze===void 0?ze=h:ze=ze.filter(re=>re!==de)),nt.value=!0,qe.value=u.value.getFlattenedNodes(ze),O!==null){const re=qe.value.findIndex(Ee=>Ee.key===O);if(~re){const Ee=qe.value[re].children;if(Ee){const Le=gn(Ee,h);qe.value.splice(re+1,0,{__motion:!0,mode:"expand",height:Ie?Le.length*T:void 0,nodes:Ie?Le.slice(0,it):Le})}}}if(de!==null){const re=qe.value.findIndex(Ee=>Ee.key===de);if(~re){const Ee=qe.value[re].children;if(!Ee)return;nt.value=!0;const Le=gn(Ee,h);qe.value.splice(re+1,0,{__motion:!0,mode:"collapse",height:Ie?Le.length*T:void 0,nodes:Ie?Le.slice(0,it):Le})}}});const Hn=M(()=>zl(U.value)),Gn=M(()=>nt.value?qe.value:U.value);function Rt(){const{value:h}=r;h&&h.sync()}function Wn(){nt.value=!1,e.virtualScroll&&Xe(Rt)}function $e(h){const{getNode:C}=m.value;return h.map(T=>{var L;return((L=C(T))===null||L===void 0?void 0:L.rawNode)||null})}function lt(h,C,T){const{"onUpdate:expandedKeys":L,onUpdateExpandedKeys:O}=e;he.value=h,L&&ke(L,h,C,T),O&&ke(O,h,C,T)}function rn(h,C,T){const{"onUpdate:checkedKeys":L,onUpdateCheckedKeys:O}=e;i.value=h,O&&ke(O,h,C,T),L&&ke(L,h,C,T)}function Qn(h,C){const{"onUpdate:indeterminateKeys":T,onUpdateIndeterminateKeys:L}=e;T&&ke(T,h,C),L&&ke(L,h,C)}function Ft(h,C,T){const{"onUpdate:selectedKeys":L,onUpdateSelectedKeys:O}=e;A.value=h,O&&ke(O,h,C,T),L&&ke(L,h,C,T)}function Xn(h){const{onDragenter:C}=e;C&&ke(C,h)}function Yn(h){const{onDragleave:C}=e;C&&ke(C,h)}function Jn(h){const{onDragend:C}=e;C&&ke(C,h)}function Zn(h){const{onDragstart:C}=e;C&&ke(C,h)}function el(h){const{onDragover:C}=e;C&&ke(C,h)}function tl(h){const{onDrop:C}=e;C&&ke(C,h)}function ht(){nl(),Qe()}function nl(){se.value=null}function Qe(){St.value=0,ge.value=null,je.value=null,wt.value=null,at()}function at(){J&&(window.clearTimeout(J),J=null),ue=null}function Mt(h,C){if(e.disabled||We(h,e.disabledField))return;if(e.internalUnifySelectCheck&&!e.multiple){Vt(h);return}const T=C?"check":"uncheck",{checkedKeys:L,indeterminateKeys:O}=m.value[T](h.key,H.value,{cascade:e.cascade,checkStrategy:q.value,allowNotLoaded:e.allowCheckingNotLoaded});rn(L,$e(L),{node:h.rawNode,action:T}),Qn(O,$e(O))}function ll(h){if(e.disabled)return;const{key:C}=h,{value:T}=R,L=T.findIndex(O=>O===C);if(~L){const O=Array.from(T);O.splice(L,1),lt(O,$e(O),{node:h.rawNode,action:"collapse"})}else{const O=u.value.getNode(C);if(!O||O.isLeaf)return;let de;if(e.accordion){const Te=new Set(h.siblings.map(({key:Ie})=>Ie));de=T.filter(Ie=>!Te.has(Ie)),de.push(C)}else de=T.concat(C);lt(de,$e(de),{node:h.rawNode,action:"expand"})}}function on(h){e.disabled||nt.value||ll(h)}function Vt(h){if(!(e.disabled||!e.selectable)){if(K.value=h.key,e.internalUnifySelectCheck){const{value:{checkedKeys:C,indeterminateKeys:T}}=E;e.multiple?Mt(h,!(C.includes(h.key)||T.includes(h.key))):rn([h.key],$e([h.key]),{node:h.rawNode,action:"check"})}if(e.multiple){const C=Array.from(X.value),T=C.findIndex(L=>L===h.key);~T?e.cancelable&&C.splice(T,1):~T||C.push(h.key),Ft(C,$e(C),{node:h.rawNode,action:~T?"unselect":"select"})}else X.value.includes(h.key)?e.cancelable&&Ft([],[],{node:h.rawNode,action:"unselect"}):Ft([h.key],$e([h.key]),{node:h.rawNode,action:"select"})}}function al(h){if(J&&(window.clearTimeout(J),J=null),h.isLeaf)return;ue=h.key;const C=()=>{if(ue!==h.key)return;const{value:T}=je;if(T&&T.key===h.key&&!R.value.includes(h.key)){const L=R.value.concat(h.key);lt(L,$e(L),{node:h.rawNode,action:"expand"})}J=null,ue=null};h.shallowLoaded?J=window.setTimeout(()=>{C()},1e3):J=window.setTimeout(()=>{an(h).then(()=>{C()})},1e3)}function rl({event:h,node:C}){!e.draggable||e.disabled||We(C,e.disabledField)||(sn({event:h,node:C},!1),Xn({event:h,node:C.rawNode}))}function ol({event:h,node:C}){!e.draggable||e.disabled||We(C,e.disabledField)||Yn({event:h,node:C.rawNode})}function il(h){h.target===h.currentTarget&&Qe()}function sl({event:h,node:C}){ht(),!(!e.draggable||e.disabled||We(C,e.disabledField))&&Jn({event:h,node:C.rawNode})}function dl({event:h,node:C}){!e.draggable||e.disabled||We(C,e.disabledField)||(ie=h.clientX,se.value=C,Zn({event:h,node:C.rawNode}))}function sn({event:h,node:C},T=!0){var L;if(!e.draggable||e.disabled||We(C,e.disabledField))return;const{value:O}=se;if(!O)return;const{allowDrop:de,indent:Te}=e;T&&el({event:h,node:C.rawNode});const Ie=h.currentTarget,{height:ot,top:it}=Ie.getBoundingClientRect(),ze=h.clientY-it;let re;de({node:C.rawNode,dropPosition:"inside",phase:"drag"})?ze<=8?re="before":ze>=ot-8?re="after":re="inside":ze<=ot/2?re="before":re="after";const{value:Le}=Hn;let le,xe;const st=Le(C.key);if(st===null){Qe();return}let Tt=!1;re==="inside"?(le=C,xe="inside"):re==="before"?C.isFirstChild?(le=C,xe="before"):(le=U.value[st-1],xe="after"):(le=C,xe="after"),!le.isLeaf&&R.value.includes(le.key)&&(Tt=!0,xe==="after"&&(le=U.value[st+1],le?xe="before":(le=C,xe="inside")));const cn=le;if(je.value=cn,!Tt&&O.isLastChild&&O.key===le.key&&(xe="after"),xe==="after"){let un=ie-h.clientX,Ut=0;for(;un>=Te/2&&le.parent!==null&&le.isLastChild&&Ut<1;)un-=Te,Ut+=1,le=le.parent;St.value=Ut}else St.value=0;if((O.contains(le)||xe==="inside"&&((L=O.parent)===null||L===void 0?void 0:L.key)===le.key)&&!(O.key===cn.key&&O.key===le.key)){Qe();return}if(!de({node:le.rawNode,dropPosition:xe,phase:"drag"})){Qe();return}if(O.key===le.key)at();else if(ue!==le.key)if(xe==="inside"){if(e.expandOnDragenter){if(al(le),!le.shallowLoaded&&ue!==le.key){ht();return}}else if(!le.shallowLoaded){ht();return}}else at();else xe!=="inside"&&at();wt.value=xe,ge.value=le}function cl({event:h,node:C,dropPosition:T}){if(!e.draggable||e.disabled||We(C,e.disabledField))return;const{value:L}=se,{value:O}=ge,{value:de}=wt;if(!(!L||!O||!de)&&e.allowDrop({node:O.rawNode,dropPosition:de,phase:"drag"})&&L.key!==O.key){if(de==="before"){const Te=L.getNext({includeDisabled:!0});if(Te&&Te.key===O.key){Qe();return}}if(de==="after"){const Te=L.getPrev({includeDisabled:!0});if(Te&&Te.key===O.key){Qe();return}}tl({event:h,node:O.rawNode,dragNode:L.rawNode,dropPosition:T}),ht()}}function ul(){Rt()}function fl(){Rt()}function hl(h){var C;if(e.virtualScroll||e.internalScrollable){const{value:T}=r;if(!((C=T==null?void 0:T.containerRef)===null||C===void 0)&&C.contains(h.relatedTarget))return;K.value=null}else{const{value:T}=f;if(T!=null&&T.contains(h.relatedTarget))return;K.value=null}}be(K,h=>{var C,T;if(h!==null){if(e.virtualScroll)(C=g.value)===null||C===void 0||C.scrollTo({key:h});else if(e.internalScrollable){const{value:L}=r;if(L===null)return;const O=(T=L.contentRef)===null||T===void 0?void 0:T.querySelector(`[data-key="${Ln(h)}"]`);if(!O)return;L.scrollTo({el:O})}}}),Dn(Ct,{loadingKeysRef:B,highlightKeySetRef:Ve,displayedCheckedKeysRef:H,displayedIndeterminateKeysRef:W,mergedSelectedKeysRef:X,mergedExpandedKeysRef:R,mergedThemeRef:o,mergedCheckStrategyRef:q,nodePropsRef:ee(e,"nodeProps"),disabledRef:ee(e,"disabled"),checkableRef:ee(e,"checkable"),selectableRef:ee(e,"selectable"),expandOnClickRef:ee(e,"expandOnClick"),onLoadRef:ee(e,"onLoad"),draggableRef:ee(e,"draggable"),blockLineRef:ee(e,"blockLine"),indentRef:ee(e,"indent"),cascadeRef:ee(e,"cascade"),checkOnClickRef:ee(e,"checkOnClick"),checkboxPlacementRef:e.checkboxPlacement,droppingMouseNodeRef:je,droppingNodeParentRef:qn,draggingNodeRef:se,droppingPositionRef:wt,droppingOffsetLevelRef:St,fNodesRef:U,pendingNodeKeyRef:K,showLineRef:ee(e,"showLine"),disabledFieldRef:ee(e,"disabledField"),internalScrollableRef:ee(e,"internalScrollable"),internalCheckboxFocusableRef:ee(e,"internalCheckboxFocusable"),internalTreeSelect:e.internalTreeSelect,renderLabelRef:ee(e,"renderLabel"),renderPrefixRef:ee(e,"renderPrefix"),renderSuffixRef:ee(e,"renderSuffix"),renderSwitcherIconRef:ee(e,"renderSwitcherIcon"),labelFieldRef:ee(e,"labelField"),multipleRef:ee(e,"multiple"),overrideDefaultNodeClickBehaviorRef:ee(e,"overrideDefaultNodeClickBehavior"),handleSwitcherClick:on,handleDragEnd:sl,handleDragEnter:rl,handleDragLeave:ol,handleDragStart:dl,handleDrop:cl,handleDragOver:sn,handleSelect:Vt,handleCheck:Mt});function vl(h,C){var T,L;typeof h=="number"?(T=g.value)===null||T===void 0||T.scrollTo(h,C||0):(L=g.value)===null||L===void 0||L.scrollTo(h)}const gl={handleKeydown:ce,scrollTo:vl,getCheckedData:()=>{if(!e.checkable)return{keys:[],options:[]};const{checkedKeys:h}=E.value;return{keys:h,options:$e(h)}},getIndeterminateData:()=>{if(!e.checkable)return{keys:[],options:[]};const{indeterminateKeys:h}=E.value;return{keys:h,options:$e(h)}}},dn=M(()=>{const{common:{cubicBezierEaseInOut:h},self:{fontSize:C,nodeBorderRadius:T,nodeColorHover:L,nodeColorPressed:O,nodeColorActive:de,arrowColor:Te,loadingColor:Ie,nodeTextColor:ot,nodeTextColorDisabled:it,dropMarkColor:ze,nodeWrapperPadding:re,nodeHeight:Ee,lineHeight:Le,lineColor:le}}=o.value,xe=It(re,"top"),st=It(re,"bottom"),Tt=_e(Ne(Ee)-Ne(xe)-Ne(st));return{"--n-arrow-color":Te,"--n-loading-color":Ie,"--n-bezier":h,"--n-font-size":C,"--n-node-border-radius":T,"--n-node-color-active":de,"--n-node-color-hover":L,"--n-node-color-pressed":O,"--n-node-text-color":ot,"--n-node-text-color-disabled":it,"--n-drop-mark-color":ze,"--n-node-wrapper-padding":re,"--n-line-offset-top":`-${xe}`,"--n-line-offset-bottom":`-${st}`,"--n-node-content-height":Tt,"--n-line-height":Le,"--n-line-color":le}}),rt=a?kt("tree",void 0,dn,e):void 0;return Object.assign(Object.assign({},gl),{mergedClsPrefix:l,mergedTheme:o,rtlEnabled:d,fNodes:Gn,aip:nt,selfElRef:f,virtualListInstRef:g,scrollbarInstRef:r,handleFocusout:hl,handleDragLeaveTree:il,handleScroll:ul,getScrollContainer:x,getScrollContent:w,handleAfterEnter:Wn,handleResize:fl,cssVars:a?void 0:dn,themeClass:rt==null?void 0:rt.themeClass,onRender:rt==null?void 0:rt.onRender})},render(){var e;const{fNodes:l,internalRenderEmpty:a}=this;if(!l.length&&a)return a();const{mergedClsPrefix:t,blockNode:d,blockLine:o,draggable:f,disabled:r,ellipsis:g,internalFocusable:x,checkable:w,handleKeydown:S,rtlEnabled:y,handleFocusout:u,scrollbarProps:p}=this,m=x&&!r,b=m?"0":void 0,i=[`${t}-tree`,y&&`${t}-tree--rtl`,w&&`${t}-tree--checkable`,(o||d)&&`${t}-tree--block-node`,o&&`${t}-tree--block-line`,g&&`${t}-tree--ellipsis`],v=E=>"__motion"in E?k(Fa,{height:E.height,nodes:E.nodes,clsPrefix:t,mode:E.mode,onAfterEnter:this.handleAfterEnter}):k(jn,{key:E.key,tmNode:E,clsPrefix:t});if(this.virtualScroll){const{mergedTheme:E,internalScrollablePadding:q}=this,H=It(q||"0");return k(hn,Object.assign({},p,{ref:"scrollbarInstRef",onDragleave:f?this.handleDragLeaveTree:void 0,container:this.getScrollContainer,content:this.getScrollContent,class:i,theme:E.peers.Scrollbar,themeOverrides:E.peerOverrides.Scrollbar,tabindex:b,onKeydown:m?S:void 0,onFocusout:m?u:void 0}),{default:()=>{var W;return(W=this.onRender)===null||W===void 0||W.call(this),l.length?k(Ul,{ref:"virtualListInstRef",items:this.fNodes,itemSize:Ne(E.self.nodeHeight),ignoreItemResize:this.aip,paddingTop:H.top,paddingBottom:H.bottom,class:this.themeClass,style:[this.cssVars,{paddingLeft:H.left,paddingRight:H.right}],onScroll:this.handleScroll,onResize:this.handleResize,showScrollbar:!1,itemResizable:!0},{default:({item:A})=>v(A)}):Yt(this.$slots.empty,()=>[k(zt,{class:`${t}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})])}})}const{internalScrollable:D}=this;return i.push(this.themeClass),(e=this.onRender)===null||e===void 0||e.call(this),D?k(hn,Object.assign({},p,{class:i,tabindex:b,onKeydown:m?S:void 0,onFocusout:m?u:void 0,style:this.cssVars,contentStyle:{padding:this.internalScrollablePadding}}),{default:()=>k("div",{onDragleave:f?this.handleDragLeaveTree:void 0,ref:"selfElRef"},this.fNodes.map(v))}):k("div",{class:i,tabindex:b,ref:"selfElRef",style:this.cssVars,onKeydown:m?S:void 0,onFocusout:m?u:void 0,onDragleave:f?this.handleDragLeaveTree:void 0},l.length?l.map(v):Yt(this.$slots.empty,()=>[k(zt,{class:`${t}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})]))}}),qa={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Ha=ne({name:"Close",render:function(l,a){return z(),fe("svg",qa,a[0]||(a[0]=[te("path",{d:"M289.94 256l95-95A24 24 0 0 0 351 127l-95 95l-95-95a24 24 0 0 0-34 34l95 95l-95 95a24 24 0 1 0 34 34l95-95l95 95a24 24 0 0 0 34-34z",fill:"currentColor"},null,-1)]))}}),Ga={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Wa=ne({name:"List",render:function(l,a){return z(),fe("svg",Ga,a[0]||(a[0]=[El('<path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="48" d="M160 144h288"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="48" d="M160 256h288"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="48" d="M160 368h288"></path><circle cx="80" cy="144" r="16" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></circle><circle cx="80" cy="256" r="16" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></circle><circle cx="80" cy="368" r="16" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></circle>',6)]))}}),Qa={style:{display:"flex","align-items":"center",gap:"16px"}},Xa={class:"type-card-content"},Ya={class:"type-card-content"},Ja={class:"type-card-content"},Za={class:"type-card-content"},er=ne({__name:"Step1DataSource",props:{formData:{},sourceType:{},targetType:{},isEdit:{type:Boolean}},emits:["update:sourceType","update:targetType"],setup(e,{expose:l,emit:a}){const t=e,d=a,o=tn(),f=I(null),r=I(!1),g=I(!1),x={name:[{required:!0,message:"",trigger:"blur"}],sourceId:[{required:!0,message:"",trigger:"change"}],targetId:[{required:!0,message:"",trigger:"change"}]},w=M(()=>t.sourceType?o.dataSources.filter(m=>m.type===t.sourceType&&m.id!==t.formData.targetId).map(m=>({label:m.name,value:m.id})):[]),S=M(()=>t.targetType?o.dataSources.filter(m=>m.type===t.targetType&&m.id!==t.formData.sourceId).map(m=>({label:m.name,value:m.id})):[]);function y(m){t.formData.sourceId="",d("update:sourceType",m),r.value=!1}function u(m){t.formData.targetId="",d("update:targetType",m),g.value=!1}async function p(){var m;return(m=f.value)==null?void 0:m.validate()}return l({validate:p}),(m,b)=>(z(),fe(Re,null,[s(n(Lt),{ref_key:"formRef",ref:f,model:e.formData,rules:x,"label-placement":"left","label-width":"120"},{default:c(()=>[s(n(we),{label:"",path:"name"},{default:c(()=>[s(n(Fe),{value:e.formData.name,"onUpdate:value":b[0]||(b[0]=i=>e.formData.name=i),placeholder:""},null,8,["value"])]),_:1}),s(n(Ue)),s(n(we),{label:"",path:"syncDirection"},{default:c(()=>[te("div",Qa,[s(n(Ce),{onClick:b[1]||(b[1]=i=>r.value=!0),style:{"min-width":"120px"},disabled:t.isEdit},{icon:c(()=>[t.sourceType==="mysql"?(z(),j(n(me),{key:0,color:"#0ea5e9"},{default:c(()=>[s(n(bt))]),_:1})):t.sourceType==="elasticsearch"?(z(),j(n(me),{key:1,color:"#10b981"},{default:c(()=>[s(n(ct))]),_:1})):Z("",!0)]),default:c(()=>[F(" "+G(t.sourceType==="mysql"?"MySQL":t.sourceType==="elasticsearch"?"Elasticsearch":""),1)]),_:1},8,["disabled"]),s(n(me),{size:"24"},{default:c(()=>[s(n(Ol))]),_:1}),s(n(Ce),{onClick:b[2]||(b[2]=i=>g.value=!0),style:{"min-width":"120px"},disabled:t.isEdit},{icon:c(()=>[t.targetType==="mysql"?(z(),j(n(me),{key:0,color:"#0ea5e9"},{default:c(()=>[s(n(bt))]),_:1})):t.targetType==="elasticsearch"?(z(),j(n(me),{key:1,color:"#10b981"},{default:c(()=>[s(n(ct))]),_:1})):Z("",!0)]),default:c(()=>[F(" "+G(t.targetType==="mysql"?"MySQL":t.targetType==="elasticsearch"?"Elasticsearch":""),1)]),_:1},8,["disabled"])])]),_:1}),s(n(Ue)),s(n(we),{label:"",path:"sourceId"},{default:c(()=>[s(n(pn),{value:e.formData.sourceId,"onUpdate:value":b[3]||(b[3]=i=>e.formData.sourceId=i),options:w.value,placeholder:"",disabled:!t.sourceType},null,8,["value","options","disabled"])]),_:1}),s(n(we),{label:"",path:"targetId"},{default:c(()=>[s(n(pn),{value:e.formData.targetId,"onUpdate:value":b[4]||(b[4]=i=>e.formData.targetId=i),options:S.value,placeholder:"",disabled:!t.targetType},null,8,["value","options","disabled"])]),_:1})]),_:1},8,["model"]),s(n(Et),{show:r.value,"onUpdate:show":b[7]||(b[7]=i=>r.value=i),preset:"card",title:"",style:{width:"400px"}},{default:c(()=>[s(n(oe),{justify:"center"},{default:c(()=>[s(n(Pe),{class:Dt(["type-card",{"type-card-selected":t.sourceType==="mysql"}]),onClick:b[5]||(b[5]=i=>y("mysql")),hoverable:""},{default:c(()=>[te("div",Xa,[s(n(me),{size:"48",color:"#0ea5e9"},{default:c(()=>[s(n(bt))]),_:1}),b[11]||(b[11]=te("div",{class:"type-card-title"},"MySQL",-1))])]),_:1},8,["class"]),s(n(Pe),{class:Dt(["type-card",{"type-card-selected":t.sourceType==="elasticsearch"}]),onClick:b[6]||(b[6]=i=>y("elasticsearch")),hoverable:""},{default:c(()=>[te("div",Ya,[s(n(me),{size:"48",color:"#10b981"},{default:c(()=>[s(n(ct))]),_:1}),b[12]||(b[12]=te("div",{class:"type-card-title"},"Elasticsearch",-1))])]),_:1},8,["class"])]),_:1})]),_:1},8,["show"]),s(n(Et),{show:g.value,"onUpdate:show":b[10]||(b[10]=i=>g.value=i),preset:"card",title:"",style:{width:"400px"}},{default:c(()=>[s(n(oe),{justify:"center"},{default:c(()=>[s(n(Pe),{class:Dt(["type-card",{"type-card-selected":t.targetType==="mysql"}]),onClick:b[8]||(b[8]=i=>u("mysql")),hoverable:""},{default:c(()=>[te("div",Ja,[s(n(me),{size:"48",color:"#0ea5e9"},{default:c(()=>[s(n(bt))]),_:1}),b[13]||(b[13]=te("div",{class:"type-card-title"},"MySQL",-1))])]),_:1},8,["class"]),s(n(Pe),{class:Dt(["type-card",{"type-card-selected":t.targetType==="elasticsearch"}]),onClick:b[9]||(b[9]=i=>u("elasticsearch")),hoverable:""},{default:c(()=>[te("div",Za,[s(n(me),{size:"48",color:"#10b981"},{default:c(()=>[s(n(ct))]),_:1}),b[14]||(b[14]=te("div",{class:"type-card-title"},"Elasticsearch",-1))])]),_:1},8,["class"])]),_:1})]),_:1},8,["show"])],64))}}),tr=Kn(er,[["__scopeId","data-v-008c36a9"]]),nr={style:{display:"flex",gap:"16px"}},lr={style:{flex:"1",border:"1px solid #e0e0e0","border-radius":"4px",padding:"12px"}},ar={style:{"margin-bottom":"8px",display:"flex","justify-content":"space-between","align-items":"center"}},rr={style:{flex:"1",border:"1px solid #e0e0e0","border-radius":"4px",padding:"12px"}},or={style:{"margin-bottom":"8px","font-weight":"500"}},ir=ne({__name:"TableSelector",props:{treeData:{},checkedKeys:{},dbNameTransform:{}},emits:["update:checkedKeys"],setup(e,{emit:l}){const a=e,t=l,d=I(""),o=I(""),f=M(()=>{if(console.log(":",a.treeData),!d.value)return a.treeData;const i=d.value.toLowerCase();return a.treeData.map(v=>{var q,H;const D=(q=v.label)==null?void 0:q.toString().toLowerCase().includes(i),E=((H=v.children)==null?void 0:H.filter(W=>{var A;return(A=W.label)==null?void 0:A.toString().toLowerCase().includes(i)}))||[];return D||E.length>0?{...v,children:D?v.children:E}:null}).filter(Boolean)}),r=M(()=>a.checkedKeys.filter(i=>i.includes(".")));function g(i){if(!a.dbNameTransform||!a.dbNameTransform.enabled)return i;const{mode:v,sourcePattern:D,targetPattern:E}=a.dbNameTransform;if(!D||!E)return i;if(v==="prefix"){if(i.startsWith(D))return E+i.slice(D.length)}else if(i.endsWith(D))return i.slice(0,-D.length)+E;return i}const x=M(()=>{const i=new Map;return r.value.forEach(v=>{const[D,E]=v.split(".");i.has(D)||i.set(D,[]),i.get(D).push(E)}),Array.from(i.entries()).map(([v,D])=>{const E=g(v),q=E!==v?`${v}  ${E}`:v;return{key:v,label:q,isTable:!1,children:D.map(H=>({key:`${v}.${H}`,label:H,isTable:!0}))}})}),w=M(()=>{if(!o.value)return x.value;const i=o.value.toLowerCase();return x.value.map(v=>{var q,H;const D=(q=v.label)==null?void 0:q.toString().toLowerCase().includes(i),E=((H=v.children)==null?void 0:H.filter(W=>{var A;return(A=W.label)==null?void 0:A.toString().toLowerCase().includes(i)}))||[];return D||E.length>0?{...v,children:D?v.children:E}:null}).filter(Boolean)});function S(i){t("update:checkedKeys",i)}function y(){const i=[];a.treeData.forEach(v=>{i.push(v.key),v.children&&v.children.forEach(D=>{i.push(D.key)})}),t("update:checkedKeys",i)}function u(){t("update:checkedKeys",[])}function p(i){const v=a.checkedKeys.filter(D=>D!==i);t("update:checkedKeys",v)}function m({option:i}){return k(me,{color:i.isTable?"#666":"#0ea5e9",style:{marginRight:"4px"}},{default:()=>k(i.isTable?Wa:bt)})}function b({option:i}){return i.isTable?k(Ce,{text:!0,size:"small",onClick:v=>{v.stopPropagation(),p(i.key)}},{icon:()=>k(me,null,{default:()=>k(Ha)})}):null}return(i,v)=>(z(),fe("div",nr,[te("div",lr,[te("div",ar,[v[4]||(v[4]=te("span",{style:{"font-weight":"500"}},"",-1)),s(n(oe),null,{default:c(()=>[s(n(Ce),{size:"small",onClick:y},{default:c(()=>[...v[2]||(v[2]=[F("",-1)])]),_:1}),s(n(Ce),{size:"small",onClick:u},{default:c(()=>[...v[3]||(v[3]=[F("",-1)])]),_:1})]),_:1})]),s(n(Fe),{value:d.value,"onUpdate:value":v[0]||(v[0]=D=>d.value=D),placeholder:"",clearable:"",style:{"margin-bottom":"12px"}},null,8,["value"]),s(n(Bt),{data:f.value,checkable:"",cascade:"","checked-keys":e.checkedKeys,"onUpdate:checkedKeys":S,pattern:d.value,"show-irrelevant-nodes":!1,"block-line":"","expand-on-click":"","key-field":"key","label-field":"label","children-field":"children","render-prefix":m,style:{"max-height":"400px","overflow-y":"auto"}},null,8,["data","checked-keys","pattern"])]),te("div",rr,[te("div",or,"  ("+G(r.value.length)+") ",1),s(n(Fe),{value:o.value,"onUpdate:value":v[1]||(v[1]=D=>o.value=D),placeholder:"",clearable:"",style:{"margin-bottom":"12px"}},null,8,["value"]),s(n(Bt),{data:w.value,"show-line":!1,"block-line":"","expand-on-click":"","key-field":"key","label-field":"label","children-field":"children","render-prefix":m,"render-suffix":b,style:{"max-height":"400px","overflow-y":"auto"}},null,8,["data"]),r.value.length===0?(z(),j(n(zt),{key:0,description:"",size:"small",style:{"margin-top":"20px"}})):Z("",!0)])]))}}),sr={style:{"margin-top":"16px",padding:"16px",border:"1px solid #e0e0e0","border-radius":"4px","background-color":"#fafafa"}},dr=ne({__name:"DbNameTransform",props:{modelValue:{}},emits:["update:modelValue"],setup(e,{emit:l}){var g,x,w,S;const a=e,t=l,d=I(((g=a.modelValue)==null?void 0:g.enabled)||!1),o=I(((x=a.modelValue)==null?void 0:x.mode)||"prefix"),f=I(((w=a.modelValue)==null?void 0:w.sourcePattern)||""),r=I(((S=a.modelValue)==null?void 0:S.targetPattern)||"");return be([d,o,f,r],()=>{t("update:modelValue",{enabled:d.value,mode:o.value,sourcePattern:f.value,targetPattern:r.value})}),(y,u)=>(z(),fe("div",sr,[u[7]||(u[7]=te("div",{style:{"margin-bottom":"12px","font-weight":"500"}},"",-1)),s(n(Lt),{"label-placement":"left","label-width":"120"},{default:c(()=>[s(n(we),{label:""},{default:c(()=>[s(n(Pa),{value:d.value,"onUpdate:value":u[0]||(u[0]=p=>d.value=p)},null,8,["value"]),u[4]||(u[4]=te("span",{style:{"margin-left":"12px",color:"#999","font-size":"13px"}},"  ",-1))]),_:1}),d.value?(z(),fe(Re,{key:0},[s(n(we),{label:""},{default:c(()=>[s(n(yt),{value:o.value,"onUpdate:value":u[1]||(u[1]=p=>o.value=p)},{default:c(()=>[s(n(oe),null,{default:c(()=>[s(n(Ae),{value:"prefix"},{default:c(()=>[...u[5]||(u[5]=[F("",-1)])]),_:1}),s(n(Ae),{value:"suffix"},{default:c(()=>[...u[6]||(u[6]=[F("",-1)])]),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),s(n(we),{label:o.value==="prefix"?"":""},{default:c(()=>[s(n(Fe),{value:f.value,"onUpdate:value":u[2]||(u[2]=p=>f.value=p),placeholder:o.value==="prefix"?"a_":"_app"},null,8,["value","placeholder"])]),_:1},8,["label"]),s(n(we),{label:o.value==="prefix"?"":""},{default:c(()=>[s(n(Fe),{value:r.value,"onUpdate:value":u[3]||(u[3]=p=>r.value=p),placeholder:o.value==="prefix"?"b_":"_prod"},null,8,["value","placeholder"])]),_:1},8,["label"])],64)):Z("",!0)]),_:1})]))}}),cr=ne({__name:"Step2SelectTables",props:{sourceId:{},sourceType:{},modelValue:{},indexPattern:{},matchedIndices:{},dbNameTransform:{}},emits:["update:modelValue","update:indexPattern","update:matchedIndices","update:dbNameTransform"],setup(e,{expose:l,emit:a}){var A,ae,X,he;const t=e,d=a,o=nn(),f=I(!1),r=I([]),g=I([]),x=I({enabled:((A=t.dbNameTransform)==null?void 0:A.enabled)||!1,mode:((ae=t.dbNameTransform)==null?void 0:ae.mode)||"prefix",sourcePattern:((X=t.dbNameTransform)==null?void 0:X.sourcePattern)||"",targetPattern:((he=t.dbNameTransform)==null?void 0:he.targetPattern)||""}),w=I(""),S=I([]),y=I([]),u=I([]),p=I(!1),m=M(()=>p.value?y.value:S.value.slice(0,20)),b=["information_schema","mysql","performance_schema","sys"],i=M(()=>r.value.reduce(($,P)=>{var R;return $+(((R=P.children)==null?void 0:R.length)||0)},0)),v=M(()=>g.value.filter($=>$.includes(".")));be(v,$=>{d("update:modelValue",$)},{deep:!0}),be(u,$=>{d("update:modelValue",$),d("update:matchedIndices",$)},{deep:!0}),be(x,$=>{d("update:dbNameTransform",$)},{deep:!0}),be(()=>t.modelValue,$=>{$&&$.length>0&&(t.sourceType==="mysql"&&g.value.length===0?g.value=[...$]:t.sourceType==="elasticsearch"&&u.value.length===0&&(u.value=[...$]))},{immediate:!0}),be(()=>t.dbNameTransform,$=>{$&&JSON.stringify($)!==JSON.stringify(x.value)&&(x.value={enabled:$.enabled,mode:$.mode,sourcePattern:$.sourcePattern,targetPattern:$.targetPattern})},{deep:!0,immediate:!0}),be(()=>t.sourceType,$=>{$==="elasticsearch"&&t.sourceId&&q()},{immediate:!0});async function D(){if(t.sourceId){f.value=!0,r.value=[];try{const R=(await o.fetchDatabases(t.sourceId)).filter(K=>!b.includes(K)).map(async K=>{try{const ce=await o.fetchTables(t.sourceId,K);return{key:K,label:K,isTable:!1,children:ce.map(J=>({key:`${K}.${J}`,label:J,isTable:!0}))}}catch(ce){return console.error(` ${K} :`,ce),{key:K,label:K,isTable:!1,children:[]}}}),U=await Promise.all(R);r.value=U}catch($){Ye($,"")}finally{f.value=!1}}}function E($){g.value=$}async function q(){if(t.sourceId){f.value=!0;try{const $=await o.fetchIndices(t.sourceId);S.value=$,y.value=[],p.value=!1}catch($){Ye($,"")}finally{f.value=!1}}}function H(){w.value="",y.value=[],p.value=!1}async function W(){if(!t.sourceId)return;const $=w.value.trim();if(!$||$==="*"){y.value=[],p.value=!1;return}f.value=!0,p.value=!0;try{if($.includes("*")||$.includes("?")){const P=await o.matchIndices(t.sourceId,$);y.value=P.preview,d("update:indexPattern",$)}else{const P=$.toLowerCase();y.value=S.value.filter(R=>R.toLowerCase().includes(P))}}catch(P){Ye(P,""),y.value=[]}finally{f.value=!1}}return l({loadAllDatabaseTables:D}),($,P)=>(z(),fe("div",null,[e.sourceType==="mysql"?(z(),j(n(oe),{key:0,vertical:"",style:{width:"100%"}},{default:c(()=>[r.value.length>0?(z(),j(n(Ze),{key:0,type:"info","show-icon":!1,style:{"margin-bottom":"16px"}},{default:c(()=>[F("  "+G(r.value.length)+"  "+G(i.value)+"  ",1)]),_:1})):Z("",!0),f.value?(z(),j(n(Ze),{key:1,type:"info","show-icon":!1},{default:c(()=>[...P[3]||(P[3]=[F(" ... ",-1)])]),_:1})):Z("",!0),r.value.length>0?(z(),j(ir,{key:2,"tree-data":r.value,"checked-keys":g.value,"db-name-transform":x.value,"onUpdate:checkedKeys":E},null,8,["tree-data","checked-keys","db-name-transform"])):Z("",!0),r.value.length>0?(z(),j(dr,{key:3,modelValue:x.value,"onUpdate:modelValue":P[0]||(P[0]=R=>x.value=R)},null,8,["modelValue"])):Z("",!0)]),_:1})):Z("",!0),e.sourceType==="elasticsearch"?(z(),j(n(oe),{key:1,vertical:"",style:{width:"100%"}},{default:c(()=>[s(n(Fe),{value:w.value,"onUpdate:value":P[1]||(P[1]=R=>w.value=R),placeholder:" logs-*",clearable:"",onKeyup:Pn(W,["enter"]),onClear:H},{prefix:c(()=>[s(n(me),null,{default:c(()=>[s(n(ct))]),_:1})]),suffix:c(()=>[s(n(Ce),{text:"",onClick:W,loading:f.value},{default:c(()=>[...P[4]||(P[4]=[F("  ",-1)])]),_:1},8,["loading"])]),_:1},8,["value"]),m.value.length>0?(z(),j(n(Ze),{key:0,type:"info","show-icon":!1},{default:c(()=>[p.value?(z(),fe(Re,{key:1},[F("  "+G(y.value.length)+"  "+G(u.value.length)+"  ",1)],64)):(z(),fe(Re,{key:0},[F("  "+G(S.value.length)+"  20  "+G(u.value.length)+"  ",1)],64))]),_:1})):Z("",!0),s(n(ql),{show:f.value},{default:c(()=>[s(n(jl),{value:u.value,"onUpdate:value":P[2]||(P[2]=R=>u.value=R)},{default:c(()=>[s(n(oe),{vertical:""},{default:c(()=>[(z(!0),fe(Re,null,ut(m.value,R=>(z(),j(n(ln),{key:R,value:R,label:R},null,8,["value","label"]))),128))]),_:1})]),_:1},8,["value"]),!f.value&&m.value.length===0?(z(),j(n(zt),{key:0,description:"",style:{margin:"40px 0"}})):Z("",!0)]),_:1},8,["show"])]),_:1})):Z("",!0)]))}}),ur=ne({__name:"Step3SyncConfig",props:{formData:{},targetType:{}},setup(e){return(l,a)=>(z(),j(n(Lt),{model:e.formData,"label-placement":"left","label-width":"140"},{default:c(()=>[s(n(we),{label:"",path:"syncConfig.threadCount"},{default:c(()=>[s(n(Kt),{value:e.formData.syncConfig.threadCount,"onUpdate:value":a[0]||(a[0]=t=>e.formData.syncConfig.threadCount=t),min:1,max:32,style:{width:"100%"}},null,8,["value"])]),_:1}),s(n(we),{label:"",path:"syncConfig.batchSize"},{default:c(()=>[s(n(Kt),{value:e.formData.syncConfig.batchSize,"onUpdate:value":a[1]||(a[1]=t=>e.formData.syncConfig.batchSize=t),min:100,max:1e4,style:{width:"100%"}},null,8,["value"])]),_:1}),s(n(we),{label:"",path:"syncConfig.errorStrategy"},{default:c(()=>[s(n(yt),{value:e.formData.syncConfig.errorStrategy,"onUpdate:value":a[2]||(a[2]=t=>e.formData.syncConfig.errorStrategy=t)},{default:c(()=>[s(n(oe),null,{default:c(()=>[s(n(Ae),{value:"skip"},{default:c(()=>[...a[4]||(a[4]=[F("",-1)])]),_:1}),s(n(Ae),{value:"pause"},{default:c(()=>[...a[5]||(a[5]=[F("",-1)])]),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),s(n(Ue)),s(n(we),{label:"",path:"syncConfig.tableExistsStrategy"},{default:c(()=>[s(n(yt),{value:e.formData.syncConfig.tableExistsStrategy,"onUpdate:value":a[3]||(a[3]=t=>e.formData.syncConfig.tableExistsStrategy=t)},{default:c(()=>[s(n(oe),{vertical:""},{default:c(()=>[s(n(Ae),{value:"drop"},{default:c(()=>[...a[6]||(a[6]=[te("span",null,"",-1),te("span",{style:{"margin-left":"8px",color:"#999","font-size":"12px"}},"/",-1)])]),_:1}),s(n(Ae),{value:"truncate"},{default:c(()=>[...a[7]||(a[7]=[te("span",null,"",-1),te("span",{style:{"margin-left":"8px",color:"#999","font-size":"12px"}},"",-1)])]),_:1}),s(n(Ae),{value:"backup"},{default:c(()=>[...a[8]||(a[8]=[te("span",null,"",-1),te("span",{style:{"margin-left":"8px",color:"#999","font-size":"12px"}},"/",-1)])]),_:1})]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"]))}}),fr={key:0},hr=ne({__name:"Step4Confirm",props:{preview:{},sourceType:{},selectedTables:{}},setup(e){return(l,a)=>(z(),j(n(Pe),{title:"",bordered:!1},{default:c(()=>[s(n(Pt),{column:2,bordered:""},{default:c(()=>[s(n(Se),{label:""},{default:c(()=>[F(G(e.preview.taskName),1)]),_:1}),s(n(Se),{label:""},{default:c(()=>[F(G(e.preview.databaseInfo),1)]),_:1}),s(n(Se),{label:""},{default:c(()=>[F(G(e.preview.sourceName)+" ("+G(e.preview.sourceType)+") ",1)]),_:1}),s(n(Se),{label:""},{default:c(()=>[F(G(e.preview.targetName)+" ("+G(e.preview.targetType)+") ",1)]),_:1}),s(n(Se),{label:""},{default:c(()=>[F(G(e.preview.threadCount),1)]),_:1}),s(n(Se),{label:""},{default:c(()=>[F(G(e.preview.batchSize),1)]),_:1}),s(n(Se),{label:"",span:2},{default:c(()=>[F(G(e.preview.errorStrategy),1)]),_:1})]),_:1}),s(n(Ue)),e.sourceType==="mysql"&&e.selectedTables.length>0?(z(),fe("div",fr,[a[0]||(a[0]=te("h4",null,"",-1)),s(n(oe),null,{default:c(()=>[(z(!0),fe(Re,null,ut(e.selectedTables,t=>(z(),j(n(Je),{key:t,type:"info",size:"small"},{default:c(()=>[F(G(t),1)]),_:2},1024))),128))]),_:1})])):Z("",!0)]),_:1}))}}),vr={key:1},gr=ne({__name:"Step2ESIndexFilter",props:{sourceId:{},modelValue:{}},emits:["update:modelValue"],setup(e,{emit:l}){const a=e,t=l,d=nn(),o=I(!1),f=I(""),r=I(null),g=I([...a.modelValue]);be(g,y=>{t("update:modelValue",y)},{deep:!0}),be(()=>a.modelValue,y=>{JSON.stringify(y)!==JSON.stringify(g.value)&&(g.value=[...y])},{deep:!0});async function x(){if(!(!a.sourceId||!f.value.trim())){o.value=!0;try{const y=await d.matchIndices(a.sourceId,f.value.trim());r.value=y}catch(y){Ye(y,""),r.value=null}finally{o.value=!1}}}function w(){if(!r.value||r.value.preview.length===0)return;if(g.value.some(u=>u.pattern===r.value.pattern)){const u=g.value.findIndex(p=>p.pattern===r.value.pattern);g.value[u]={pattern:r.value.pattern,matchedIndices:r.value.preview}}else g.value.push({pattern:r.value.pattern,matchedIndices:r.value.preview});f.value="",r.value=null}function S(y){g.value.splice(y,1)}return(y,u)=>(z(),j(n(oe),{vertical:"",style:{width:"100%"}},{default:c(()=>[s(n(An),null,{default:c(()=>[s(n(Fe),{value:f.value,"onUpdate:value":u[0]||(u[0]=p=>f.value=p),placeholder:" logs-*",clearable:"",onKeyup:Pn(x,["enter"])},{prefix:c(()=>[s(n(me),null,{default:c(()=>[s(n(ct))]),_:1})]),_:1},8,["value"]),s(n(Ce),{type:"primary",onClick:x,loading:o.value},{default:c(()=>[...u[1]||(u[1]=[F("  ",-1)])]),_:1},8,["loading"])]),_:1}),r.value?(z(),j(n(Pe),{key:0,size:"small",title:""},{"header-extra":c(()=>[s(n(Ce),{type:"primary",size:"small",onClick:w,disabled:r.value.preview.length===0},{default:c(()=>[...u[2]||(u[2]=[F("  ",-1)])]),_:1},8,["disabled"])]),default:c(()=>[r.value.preview.length===0?(z(),j(n(Ze),{key:0,type:"warning"},{default:c(()=>[...u[3]||(u[3]=[F("  ",-1)])]),_:1})):(z(),fe("div",vr,[s(n($t),null,{default:c(()=>[F(" "+G(r.value.count)+" ",1)]),_:1}),s(n(Ue),{style:{margin:"12px 0"}}),s(n(oe),{vertical:"",size:"small"},{default:c(()=>[(z(!0),fe(Re,null,ut(r.value.preview.slice(0,10),p=>(z(),j(n(Je),{key:p,type:"info"},{default:c(()=>[F(G(p),1)]),_:2},1024))),128)),r.value.preview.length>10?(z(),j(n($t),{key:0,depth:"3"},{default:c(()=>[F(" ...  "+G(r.value.preview.length-10)+"  ",1)]),_:1})):Z("",!0)]),_:1})]))]),_:1})):Z("",!0),g.value.length>0?(z(),j(n(Pe),{key:1,size:"small",title:""},{default:c(()=>[s(n(oe),{vertical:""},{default:c(()=>[(z(!0),fe(Re,null,ut(g.value,(p,m)=>(z(),j(n(Pe),{key:m,size:"small",title:` ${m+1}: ${p.pattern}`},{"header-extra":c(()=>[s(n(Ce),{text:"",type:"error",onClick:b=>S(m)},{icon:c(()=>[s(n(me),null,{default:c(()=>[s(n(Bn))]),_:1})]),_:1},8,["onClick"])]),default:c(()=>[s(n($t),null,{default:c(()=>[F(G(p.matchedIndices.length)+" ",1)]),_:2},1024),s(n(Ue),{style:{margin:"12px 0"}}),s(n(oe),{size:"small"},{default:c(()=>[(z(!0),fe(Re,null,ut(p.matchedIndices.slice(0,5),b=>(z(),j(n(Je),{key:b,type:"success",size:"small"},{default:c(()=>[F(G(b),1)]),_:2},1024))),128)),p.matchedIndices.length>5?(z(),j(n($t),{key:0,depth:"3"},{default:c(()=>[F(" ...  "+G(p.matchedIndices.length-5)+"  ",1)]),_:2},1024)):Z("",!0)]),_:2},1024)]),_:2},1032,["title"]))),128))]),_:1})]),_:1})):Z("",!0),g.value.length===0?(z(),j(n(Ze),{key:2,type:"info"},{default:c(()=>[...u[4]||(u[4]=[F(' "" ',-1)])]),_:1})):Z("",!0)]),_:1}))}}),pr=ne({__name:"Step3ESIndexTransfer",props:{searchGroups:{},modelValue:{},indexNameTransform:{}},emits:["update:modelValue","update:indexNameTransform"],setup(e,{emit:l}){const a=e,t=l,d=I([...a.modelValue]),o=I([]),f=I([]),r=I(a.indexNameTransform||{enabled:!1,mode:"prefix",sourcePattern:"",targetPattern:""}),g=M(()=>a.searchGroups.map((u,p)=>{const m=u.matchedIndices.filter(b=>!d.value.includes(b));return{key:`group-${p}`,label:`${u.pattern} (${m.length})`,children:m.map(b=>({key:b,label:b}))}}).filter(u=>u.children&&u.children.length>0)),x=M(()=>a.searchGroups.map((u,p)=>{const m=u.matchedIndices.filter(b=>d.value.includes(b));return m.length===0?null:{key:`selected-group-${p}`,label:`${u.pattern} (${m.length})`,children:m.map(b=>({key:`selected-${b}`,label:b}))}}).filter(Boolean)),w=M(()=>{if(!r.value.enabled||d.value.length===0)return"";const u=d.value[0],{mode:p,sourcePattern:m,targetPattern:b}=r.value;if(!m&&!b)return"";let i=u;return p==="prefix"?(m&&u.startsWith(m)&&(i=u.substring(m.length)),b&&(i=b+i)):(m&&u.endsWith(m)&&(i=u.substring(0,u.length-m.length)),b&&(i=i+b)),`${u}  ${i}`});function S(u){u.filter(m=>!m.startsWith("group-")).forEach(m=>{d.value.includes(m)||d.value.push(m)}),o.value=[]}function y(u){const p=u.filter(m=>m.startsWith("selected-")&&!m.startsWith("selected-group-")).map(m=>m.replace("selected-",""));d.value=d.value.filter(m=>!p.includes(m)),f.value=[]}return be(d,u=>{t("update:modelValue",u)},{deep:!0}),be(r,u=>{t("update:indexNameTransform",u)},{deep:!0}),be(()=>a.modelValue,u=>{JSON.stringify(u)!==JSON.stringify(d.value)&&(d.value=[...u])},{deep:!0}),be(()=>a.indexNameTransform,u=>{u&&JSON.stringify(u)!==JSON.stringify(r.value)&&(r.value={...u})},{deep:!0}),(u,p)=>(z(),j(n(oe),{vertical:"",style:{width:"100%"}},{default:c(()=>[s(n(Da),{cols:"2","x-gap":"16"},{default:c(()=>[s(n(yn),null,{default:c(()=>[s(n(Pe),{title:"",size:"small"},{default:c(()=>[s(n(Bt),{data:g.value,checkable:"",cascade:"","checked-keys":o.value,"onUpdate:checkedKeys":S,"key-field":"key","label-field":"label","children-field":"children"},null,8,["data","checked-keys"])]),_:1})]),_:1}),s(n(yn),null,{default:c(()=>[s(n(Pe),{title:"",size:"small"},{default:c(()=>[s(n(Bt),{data:x.value,checkable:"",cascade:"","checked-keys":f.value,"onUpdate:checkedKeys":y,"key-field":"key","label-field":"label","children-field":"children"},null,8,["data","checked-keys"]),s(n(Ue)),s(n(oe),{vertical:""},{default:c(()=>[s(n(ln),{checked:r.value.enabled,"onUpdate:checked":p[0]||(p[0]=m=>r.value.enabled=m)},{default:c(()=>[...p[4]||(p[4]=[F("  ",-1)])]),_:1},8,["checked"]),r.value.enabled?(z(),j(n(oe),{key:0,vertical:""},{default:c(()=>[s(n(yt),{value:r.value.mode,"onUpdate:value":p[1]||(p[1]=m=>r.value.mode=m)},{default:c(()=>[s(n(oe),null,{default:c(()=>[s(n(Ae),{value:"prefix"},{default:c(()=>[...p[5]||(p[5]=[F("",-1)])]),_:1}),s(n(Ae),{value:"suffix"},{default:c(()=>[...p[6]||(p[6]=[F("",-1)])]),_:1})]),_:1})]),_:1},8,["value"]),s(n(An),null,{default:c(()=>[s(n(Fe),{value:r.value.sourcePattern,"onUpdate:value":p[2]||(p[2]=m=>r.value.sourcePattern=m),placeholder:r.value.mode==="prefix"?"":"",style:{width:"50%"}},null,8,["value","placeholder"]),s(n(Fe),{value:r.value.targetPattern,"onUpdate:value":p[3]||(p[3]=m=>r.value.targetPattern=m),placeholder:r.value.mode==="prefix"?"":"",style:{width:"50%"}},null,8,["value","placeholder"])]),_:1}),w.value?(z(),j(n(Ze),{key:0,type:"info",size:"small"},{default:c(()=>[F(" "+G(w.value),1)]),_:1})):Z("",!0)]),_:1})):Z("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),mr=ne({__name:"Step4ESConfig",props:{formData:{}},setup(e,{expose:l}){const a=I(null),t={name:[{required:!0,message:"",trigger:"blur"}],"syncConfig.threadCount":[{required:!0,type:"number",message:"",trigger:"blur"}],"syncConfig.batchSize":[{required:!0,type:"number",message:"",trigger:"blur"}]};return l({formRef:a}),(d,o)=>(z(),j(n(Lt),{ref_key:"formRef",ref:a,model:e.formData,rules:t,"label-placement":"left","label-width":"120"},{default:c(()=>[s(n(we),{label:"",path:"name"},{default:c(()=>[s(n(Fe),{value:e.formData.name,"onUpdate:value":o[0]||(o[0]=f=>e.formData.name=f),placeholder:""},null,8,["value"])]),_:1}),s(n(Ue)),s(n(we),{label:"",path:"syncConfig.threadCount"},{default:c(()=>[s(n(Kt),{value:e.formData.syncConfig.threadCount,"onUpdate:value":o[1]||(o[1]=f=>e.formData.syncConfig.threadCount=f),min:1,max:32,style:{width:"100%"}},{suffix:c(()=>[...o[4]||(o[4]=[F("",-1)])]),_:1},8,["value"])]),_:1}),s(n(we),{label:"",path:"syncConfig.batchSize"},{default:c(()=>[s(n(Kt),{value:e.formData.syncConfig.batchSize,"onUpdate:value":o[2]||(o[2]=f=>e.formData.syncConfig.batchSize=f),min:100,max:1e4,step:100,style:{width:"100%"}},{suffix:c(()=>[...o[5]||(o[5]=[F("",-1)])]),_:1},8,["value"])]),_:1}),s(n(we),{label:"",path:"syncConfig.errorStrategy"},{default:c(()=>[s(n(yt),{value:e.formData.syncConfig.errorStrategy,"onUpdate:value":o[3]||(o[3]=f=>e.formData.syncConfig.errorStrategy=f)},{default:c(()=>[s(n(oe),null,{default:c(()=>[s(n(Ae),{value:"skip"},{default:c(()=>[...o[6]||(o[6]=[F("",-1)])]),_:1}),s(n(Ae),{value:"pause"},{default:c(()=>[...o[7]||(o[7]=[F("",-1)])]),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),s(n(Ze),{type:"info",style:{"margin-top":"16px"}},{header:c(()=>[...o[8]||(o[8]=[F("",-1)])]),default:c(()=>[o[9]||(o[9]=te("ul",{style:{margin:"0","padding-left":"20px"}},[te("li",null," 4-8 "),te("li",null," 1000-5000 "),te("li",null,"ES ")],-1))]),_:1})]),_:1},8,["model"]))}}),br=ne({__name:"Step5ESConfirm",props:{preview:{},selectedIndices:{}},setup(e){return(l,a)=>(z(),j(n(oe),{vertical:"",style:{width:"100%"}},{default:c(()=>[s(n(Pe),{title:"",size:"small"},{default:c(()=>[s(n(Pt),{column:2,bordered:""},{default:c(()=>[s(n(Se),{label:""},{default:c(()=>[F(G(e.preview.taskName),1)]),_:1}),s(n(Se),{label:""},{default:c(()=>[F(G(e.preview.sourceName)+" ("+G(e.preview.sourceType)+")  "+G(e.preview.targetName)+" ("+G(e.preview.targetType)+") ",1)]),_:1})]),_:1})]),_:1}),s(n(Pe),{title:"",size:"small"},{default:c(()=>[s(n(Pt),{column:1,bordered:""},{default:c(()=>[s(n(Se),{label:""},{default:c(()=>[F(G(e.preview.searchGroupsCount)+"  ",1)]),_:1}),s(n(Se),{label:""},{default:c(()=>[F(G(e.preview.selectedIndicesCount)+"  ",1)]),_:1}),s(n(Se),{label:""},{default:c(()=>[F(G(e.preview.indexNameTransform),1)]),_:1})]),_:1}),s(n(Ue)),s(n(Fl),null,{default:c(()=>[s(n(Ml),{title:"",name:"indices"},{default:c(()=>[s(n(oe),{size:"small"},{default:c(()=>[(z(!0),fe(Re,null,ut(e.selectedIndices,t=>(z(),j(n(Je),{key:t,type:"success",size:"small"},{default:c(()=>[F(G(t),1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}),s(n(Pe),{title:"",size:"small"},{default:c(()=>[s(n(Pt),{column:2,bordered:""},{default:c(()=>[s(n(Se),{label:""},{default:c(()=>[F(G(e.preview.threadCount)+"  ",1)]),_:1}),s(n(Se),{label:""},{default:c(()=>[F(G(e.preview.batchSize)+"  ",1)]),_:1}),s(n(Se),{label:"",span:2},{default:c(()=>[F(G(e.preview.errorStrategy),1)]),_:1})]),_:1})]),_:1})]),_:1}))}}),yr=ne({__name:"index",props:{modelValue:{type:Boolean},isEdit:{type:Boolean},formData:{}},emits:["update:modelValue","submit"],setup(e,{expose:l,emit:a}){const t=e,d=a,o=tn(),f=I(),r=I(1),g=I(""),x=I(""),w=I([]),S=I(""),y=I([]),u=I([]),p=I([]),m=I({enabled:!1,mode:"prefix",sourcePattern:"",targetPattern:""}),b=M(()=>g.value==="elasticsearch"&&x.value==="elasticsearch"),i=M(()=>b.value?5:4),v=M({get:()=>t.modelValue,set:P=>d("update:modelValue",P)});be(()=>t.modelValue,P=>{var R,U;if(P&&t.isEdit){if(g.value=t.formData.sourceType||"",x.value=t.formData.targetType||"",(R=t.formData.mysqlConfig)!=null&&R.databases){const K=[];t.formData.mysqlConfig.databases.forEach(ce=>{ce.tables.forEach(J=>{K.push(`${ce.database}.${J}`)})}),w.value=K}t.formData.esConfig&&(t.formData.esConfig.searchGroups&&(u.value=t.formData.esConfig.searchGroups),t.formData.esConfig.selectedIndices&&(p.value=t.formData.esConfig.selectedIndices),t.formData.esConfig.indexNameTransform&&(m.value=t.formData.esConfig.indexNameTransform),(U=t.formData.esConfig.indices)!=null&&U[0]&&(S.value=t.formData.esConfig.indices[0].pattern,y.value=t.formData.esConfig.indices[0].matchedIndices||[]))}else P&&!t.isEdit&&(r.value=1,g.value="",x.value="",w.value=[],S.value="",y.value=[],u.value=[],p.value=[],m.value={enabled:!1,mode:"prefix",sourcePattern:"",targetPattern:""})});const D=M(()=>({width:"80vw",maxWidth:"1400px",minWidth:"800px"})),E={height:"55vh",minHeight:"400px",overflowY:"auto"},q=M(()=>{if(b.value)switch(r.value){case 1:return t.formData.sourceId&&t.formData.targetId;case 2:return u.value.length>0;case 3:return p.value.length>0;case 4:return t.formData.name&&t.formData.syncConfig;default:return!0}else switch(r.value){case 1:return t.formData.sourceId&&t.formData.targetId;case 2:return g.value==="mysql"?w.value.length>0:g.value==="elasticsearch"?y.value.length>0:!1;case 3:return t.formData.name&&t.formData.syncConfig;default:return!0}}),H=M(()=>{var K,ce,J;const P=o.dataSources.find(ue=>ue.id===t.formData.sourceId),R=o.dataSources.find(ue=>ue.id===t.formData.targetId);let U="";if(g.value==="mysql"){const ue=w.value.length;U=`${new Set(w.value.map(ye=>ye.split(".")[0])).size} ${ue} `}else g.value==="elasticsearch"&&(U=`${y.value.length} `);return{taskName:t.formData.name||"",sourceName:(P==null?void 0:P.name)||"",sourceType:(P==null?void 0:P.type)||"",targetName:(R==null?void 0:R.name)||"",targetType:(R==null?void 0:R.type)||"",databaseInfo:U,threadCount:((K=t.formData.syncConfig)==null?void 0:K.threadCount)||4,batchSize:((ce=t.formData.syncConfig)==null?void 0:ce.batchSize)||1e3,errorStrategy:((J=t.formData.syncConfig)==null?void 0:J.errorStrategy)==="skip"?"":""}}),W=M(()=>{var K,ce,J;const P=o.dataSources.find(ue=>ue.id===t.formData.sourceId),R=o.dataSources.find(ue=>ue.id===t.formData.targetId);let U="";if(m.value.enabled){const{mode:ue,sourcePattern:Be,targetPattern:ye}=m.value;ue==="prefix"?U=`${Be}  ${ye}`:U=`${Be}  ${ye}`}return{taskName:t.formData.name||"",sourceName:(P==null?void 0:P.name)||"",sourceType:(P==null?void 0:P.type)||"",targetName:(R==null?void 0:R.name)||"",targetType:(R==null?void 0:R.type)||"",searchGroupsCount:u.value.length,selectedIndicesCount:p.value.length,indexNameTransform:U,threadCount:((K=t.formData.syncConfig)==null?void 0:K.threadCount)||4,batchSize:((ce=t.formData.syncConfig)==null?void 0:ce.batchSize)||1e3,errorStrategy:((J=t.formData.syncConfig)==null?void 0:J.errorStrategy)==="skip"?"":""}});function A(){r.value<i.value&&(r.value++,r.value===2&&g.value==="mysql"&&t.formData.sourceId&&!b.value&&Xe(()=>{setTimeout(()=>{f.value&&typeof f.value.loadAllDatabaseTables=="function"&&f.value.loadAllDatabaseTables()},100)}))}function ae(P){if(P===1){r.value=P;return}if(P===2){t.formData.sourceId&&t.formData.targetId&&(r.value=P,g.value==="mysql"&&t.formData.sourceId&&!b.value&&Xe(()=>{setTimeout(()=>{f.value&&typeof f.value.loadAllDatabaseTables=="function"&&f.value.loadAllDatabaseTables()},100)}));return}if(P===3){const R=t.formData.sourceId&&t.formData.targetId;let U=!1;b.value?U=u.value.length>0:g.value==="mysql"?U=w.value.length>0:g.value==="elasticsearch"&&(U=y.value.length>0),R&&U&&(r.value=P);return}if(P===4){const R=t.formData.sourceId&&t.formData.targetId;let U=!1,K=!1;b.value?(U=u.value.length>0,K=p.value.length>0):g.value==="mysql"?(U=w.value.length>0,K=!!(t.formData.name&&t.formData.syncConfig)):g.value==="elasticsearch"&&(U=y.value.length>0,K=!!(t.formData.name&&t.formData.syncConfig)),R&&U&&K&&(r.value=P);return}if(P===5&&b.value){const R=t.formData.sourceId&&t.formData.targetId,U=u.value.length>0,K=p.value.length>0,ce=!!(t.formData.name&&t.formData.syncConfig);R&&U&&K&&ce&&(r.value=P);return}}function X(){r.value>1&&(r.value--,r.value===2&&g.value==="mysql"&&t.formData.sourceId&&!b.value&&Xe(()=>{setTimeout(()=>{f.value&&typeof f.value.loadAllDatabaseTables=="function"&&f.value.loadAllDatabaseTables()},100)}))}function he(){v.value=!1,r.value=1,g.value="",x.value="",w.value=[],S.value="",y.value=[],u.value=[],p.value=[],m.value={enabled:!1,mode:"prefix",sourcePattern:"",targetPattern:""}}function $(){const P={...t.formData};if(b.value)P.esConfig={searchGroups:u.value,selectedIndices:p.value,indexNameTransform:m.value};else if(g.value==="mysql"){const R=new Map;w.value.forEach(U=>{const[K,ce]=U.split(".");R.has(K)||R.set(K,[]),R.get(K).push(ce)}),P.mysqlConfig={databases:Array.from(R.entries()).map(([U,K])=>({database:U,tables:K}))}}else g.value==="elasticsearch"&&(P.esConfig={indices:[{pattern:S.value,matchedIndices:y.value}]});d("submit",P),r.value=1,g.value="",x.value="",w.value=[],S.value="",y.value=[],u.value=[],p.value=[],m.value={enabled:!1,mode:"prefix",sourcePattern:"",targetPattern:""}}return l({reset:()=>{r.value=1,g.value="",x.value="",w.value=[],S.value="",y.value=[],u.value=[],p.value=[],m.value={enabled:!1,mode:"prefix",sourcePattern:"",targetPattern:""}}}),(P,R)=>(z(),j(n(Et),{show:v.value,"onUpdate:show":R[9]||(R[9]=U=>v.value=U),title:e.isEdit?"":"",preset:"card",style:Kl(D.value),segmented:{content:"soft",footer:"soft"},closable:!1,"mask-closable":!1},{footer:c(()=>[s(n(oe),{justify:"space-between"},{default:c(()=>[s(n(Ce),{onClick:he},{default:c(()=>[...R[10]||(R[10]=[F("",-1)])]),_:1}),s(n(oe),null,{default:c(()=>[r.value>1?(z(),j(n(Ce),{key:0,onClick:X},{default:c(()=>[...R[11]||(R[11]=[F("  ",-1)])]),_:1})):Z("",!0),r.value<i.value?(z(),j(n(Ce),{key:1,type:"primary",onClick:A,disabled:!q.value},{default:c(()=>[...R[12]||(R[12]=[F("  ",-1)])]),_:1},8,["disabled"])):Z("",!0),r.value===i.value?(z(),j(n(oe),{key:2},{default:c(()=>[s(n(Ce),{type:"primary",onClick:$},{default:c(()=>[F(G(e.isEdit?"":""),1)]),_:1})]),_:1})):Z("",!0)]),_:1})]),_:1})]),default:c(()=>{var U;return[s(n(Hl),{current:r.value,style:{"margin-bottom":"24px"},"onUpdate:current":ae},{default:c(()=>[s(n(He),{title:""}),b.value?(z(),fe(Re,{key:0},[s(n(He),{title:""}),s(n(He),{title:""}),s(n(He),{title:""}),s(n(He),{title:""})],64)):(z(),fe(Re,{key:1},[s(n(He),{title:""}),s(n(He),{title:""}),s(n(He),{title:""})],64))]),_:1},8,["current"]),te("div",{style:E},[r.value===1?(z(),j(tr,{key:0,"form-data":e.formData,"is-edit":e.isEdit,"source-type":g.value,"onUpdate:sourceType":R[0]||(R[0]=K=>g.value=K),"target-type":x.value,"onUpdate:targetType":R[1]||(R[1]=K=>x.value=K)},null,8,["form-data","is-edit","source-type","target-type"])):Z("",!0),b.value?(z(),fe(Re,{key:1},[r.value===2?(z(),j(gr,{key:0,"source-id":e.formData.sourceId,modelValue:u.value,"onUpdate:modelValue":R[2]||(R[2]=K=>u.value=K)},null,8,["source-id","modelValue"])):Z("",!0),r.value===3?(z(),j(pr,{key:1,"search-groups":u.value,modelValue:p.value,"onUpdate:modelValue":R[3]||(R[3]=K=>p.value=K),"index-name-transform":m.value,"onUpdate:indexNameTransform":R[4]||(R[4]=K=>m.value=K)},null,8,["search-groups","modelValue","index-name-transform"])):Z("",!0),r.value===4?(z(),j(mr,{key:2,"form-data":e.formData},null,8,["form-data"])):Z("",!0),r.value===5?(z(),j(br,{key:3,preview:W.value,"selected-indices":p.value},null,8,["preview","selected-indices"])):Z("",!0)],64)):(z(),fe(Re,{key:2},[r.value===2?(z(),j(cr,{key:0,ref_key:"step2Ref",ref:f,"source-id":e.formData.sourceId,"source-type":g.value,modelValue:w.value,"onUpdate:modelValue":R[5]||(R[5]=K=>w.value=K),"index-pattern":S.value,"onUpdate:indexPattern":R[6]||(R[6]=K=>S.value=K),"matched-indices":y.value,"onUpdate:matchedIndices":R[7]||(R[7]=K=>y.value=K),"db-name-transform":(U=e.formData.syncConfig)==null?void 0:U.dbNameTransform,"onUpdate:dbNameTransform":R[8]||(R[8]=K=>e.formData.syncConfig.dbNameTransform=K)},null,8,["source-id","source-type","modelValue","index-pattern","matched-indices","db-name-transform"])):Z("",!0),r.value===3?(z(),j(ur,{key:1,"form-data":e.formData,"target-type":x.value},null,8,["form-data","target-type"])):Z("",!0),r.value===4?(z(),j(hr,{key:2,preview:H.value,"source-type":g.value,"selected-tables":w.value},null,8,["preview","source-type","selected-tables"])):Z("",!0)],64))])]}),_:1},8,["show","title","style"]))}}),xr={class:"sync-task-config"},kr=ne({__name:"SyncTaskConfig",setup(e){const l=tn(),a=nn(),t=Bl(),d={pageSize:10},o=[{title:"",key:"name",width:150},{title:"",key:"sourceType",width:120,render:i=>k(Je,{type:i.sourceType==="mysql"?"info":"success"},{default:()=>i.sourceType==="mysql"?"MySQL":"Elasticsearch"})},{title:"",key:"targetType",width:120,render:i=>k(Je,{type:i.targetType==="mysql"?"info":"success"},{default:()=>i.targetType==="mysql"?"MySQL":"Elasticsearch"})},{title:"",key:"status",width:100,render:i=>{const v={idle:{type:"default",label:""},running:{type:"info",label:""},paused:{type:"warning",label:""},completed:{type:"success",label:""},failed:{type:"error",label:""}},D=v[i.status]||v.idle;return k(Je,{type:D.type},{default:()=>D.label})}},{title:"",key:"syncConfig.threadCount",width:80,render:i=>i.syncConfig.threadCount},{title:"",key:"syncConfig.batchSize",width:100,render:i=>i.syncConfig.batchSize},{title:"",key:"createdAt",width:180,render:i=>new Date(i.createdAt).toLocaleString()},{title:"",key:"actions",width:150,render:i=>k(oe,{},{default:()=>[k(Ce,{size:"small",onClick:()=>y(i)},{default:()=>"",icon:()=>k(me,null,{default:()=>k(Ql)})}),k(Ce,{size:"small",type:"error",onClick:()=>p(i)},{default:()=>"",icon:()=>k(me,null,{default:()=>k(Bn)})})]})}],f=I(!1),r=I(!1),g=I({name:"",sourceId:"",targetId:"",sourceType:"mysql",targetType:"mysql",targetDatabase:"",mysqlConfig:{databases:[]},esConfig:{indices:[]},syncConfig:{threadCount:4,batchSize:1e3,errorStrategy:"skip",tableExistsStrategy:"drop",dbNameTransform:{enabled:!1,mode:"prefix",sourcePattern:"",targetPattern:""}},status:"idle"}),x=I(!1),w=I(null);function S(){r.value=!1,g.value={name:"",sourceId:"",targetId:"",sourceType:"mysql",targetType:"mysql",targetDatabase:"",mysqlConfig:{databases:[]},esConfig:{indices:[]},syncConfig:{threadCount:4,batchSize:1e3,errorStrategy:"skip",tableExistsStrategy:"drop",dbNameTransform:{enabled:!1,mode:"prefix",sourcePattern:"",targetPattern:""}},status:"idle"},f.value=!0}function y(i){r.value=!0,g.value={...i},f.value=!0}async function u(i){try{let v;r.value&&i.id?(await a.updateTask(i.id,i),v=i.id,Ht("")):(v=await a.createTask(i),Ht("...")),f.value=!1,await b(),r.value||setTimeout(()=>{t.push({path:"/task-monitor",query:{taskId:v}})},500)}catch(v){Ye(v,r.value?"":"")}}function p(i){w.value=i,x.value=!0}async function m(){if(w.value)try{await a.deleteTask(w.value.id),Ht(""),await b()}catch(i){Ye(i,"")}finally{w.value=null}}async function b(){try{await a.fetchTasks(),console.log(":",a.tasks)}catch(i){Ye(i,"")}}return en(async()=>{await l.fetchDataSources(),await b()}),(i,v)=>(z(),fe("div",xr,[s(n(oe),{vertical:"",size:16},{default:c(()=>[s(n(oe),{justify:"space-between"},{default:c(()=>[s(n(Ce),{type:"primary",onClick:S},{icon:c(()=>[s(n(me),null,{default:c(()=>[s(n(Gl))]),_:1})]),default:c(()=>[v[2]||(v[2]=F("  ",-1))]),_:1}),s(n(Ce),{onClick:b},{icon:c(()=>[s(n(me),null,{default:c(()=>[s(n(_l))]),_:1})]),default:c(()=>[v[3]||(v[3]=F("  ",-1))]),_:1})]),_:1}),s(n(Wl),{columns:o,data:n(a).tasks,loading:n(a).loading,pagination:d,bordered:!1},null,8,["data","loading"])]),_:1}),s(yr,{modelValue:f.value,"onUpdate:modelValue":v[0]||(v[0]=D=>f.value=D),"is-edit":r.value,"form-data":g.value,onSubmit:u},null,8,["modelValue","is-edit","form-data"]),s(n(Et),{show:x.value,"onUpdate:show":v[1]||(v[1]=D=>x.value=D),preset:"dialog",title:"",content:"","positive-text":"","negative-text":"",onPositiveClick:m},null,8,["show"])]))}}),Tr=Kn(kr,[["__scopeId","data-v-586be26d"]]);export{Tr as default};
