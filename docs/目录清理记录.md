# SyncTaskWizard 目录清理记录

## 清理时间
2025-01-27

## 清理原因
重构任务创建流程后，遗留了大量旧版本文件，导致目录结构混乱，需要清理未使用的文件。

## 清理前的目录结构

```
src/components/SyncTaskWizard/
├── index.vue                          # ✅ 使用中
├── index-old.vue                      # ❌ 旧版本
├── TaskHeader.vue                     # ✅ 使用中
├── DataSourceTypeSelector.vue         # ✅ 使用中
├── Step1SelectDataSourceType.vue     # ✅ 使用中
├── TaskTypeSelector.vue               # ❌ 未使用
├── Step1DataSource.vue                # ❌ 旧文件
├── Step2SelectTables.vue              # ❌ 旧文件
├── Step2ESIndexFilter.vue             # ❌ 旧文件
├── Step3SyncConfig.vue                # ❌ 旧文件
├── Step3ESIndexTransfer.vue           # ❌ 旧文件
├── Step4Confirm.vue                   # ❌ 旧文件
├── Step4ESConfig.vue                  # ❌ 旧文件
├── Step5ESConfirm.vue                 # ❌ 旧文件
│
├── shared/                            # ✅ 使用中
│   ├── DataSourceSelector.vue
│   └── SyncConfigForm.vue
│
├── Step2/
│   ├── DbNameTransform.vue            # ✅ 使用中
│   └── TableSelector.vue              # ❌ 未使用
│
└── TaskTypes/
    ├── MySQLToMySQL/
    │   ├── index.vue                  # ❌ 未使用
    │   ├── Step1SelectSource.vue      # ❌ 未使用
    │   ├── Step2SelectTables.vue      # ✅ 使用中
    │   ├── Step3SyncConfig.vue        # ✅ 使用中
    │   └── Step4Confirm.vue           # ✅ 使用中
    │
    ├── MySQLToES/
    │   ├── index.vue                  # ❌ 未使用
    │   ├── Step1SelectSource.vue      # ❌ 未使用
    │   ├── Step2SelectTables.vue      # ✅ 使用中
    │   ├── Step3SyncConfig.vue        # ✅ 使用中
    │   └── Step4Confirm.vue           # ✅ 使用中
    │
    ├── ESToMySQL/
    │   ├── index.vue                  # ❌ 未使用
    │   ├── Step1SelectSource.vue      # ❌ 未使用
    │   ├── Step2SelectIndices.vue     # ✅ 使用中
    │   ├── Step3SyncConfig.vue        # ✅ 使用中
    │   └── Step4Confirm.vue           # ✅ 使用中
    │
    └── ESToES/
        ├── index.vue                  # ❌ 未使用
        ├── Step1SelectSource.vue      # ❌ 未使用
        ├── Step2FilterIndices.vue     # ✅ 使用中
        ├── Step3SelectIndices.vue     # ✅ 使用中
        ├── Step4SyncConfig.vue        # ✅ 使用中
        └── Step5Confirm.vue           # ✅ 使用中
```

## 删除的文件列表

### 根目录旧文件（10个）
1. `index-old.vue` - 旧版本主组件
2. `TaskTypeSelector.vue` - 未被引用的组件
3. `Step1DataSource.vue` - 旧步骤组件
4. `Step2SelectTables.vue` - 旧步骤组件
5. `Step2ESIndexFilter.vue` - 旧步骤组件
6. `Step3SyncConfig.vue` - 旧步骤组件
7. `Step3ESIndexTransfer.vue` - 旧步骤组件
8. `Step4Confirm.vue` - 旧步骤组件
9. `Step4ESConfig.vue` - 旧步骤组件
10. `Step5ESConfirm.vue` - 旧步骤组件

### Step2 目录（1个）
11. `Step2/TableSelector.vue` - 未被使用的组件

### TaskTypes 目录（8个）
12. `TaskTypes/MySQLToMySQL/index.vue` - 未被主组件使用
13. `TaskTypes/MySQLToMySQL/Step1SelectSource.vue` - 未被主组件使用
14. `TaskTypes/MySQLToES/index.vue` - 未被主组件使用
15. `TaskTypes/MySQLToES/Step1SelectSource.vue` - 未被主组件使用
16. `TaskTypes/ESToMySQL/index.vue` - 未被主组件使用
17. `TaskTypes/ESToMySQL/Step1SelectSource.vue` - 未被主组件使用
18. `TaskTypes/ESToES/index.vue` - 未被主组件使用
19. `TaskTypes/ESToES/Step1SelectSource.vue` - 未被主组件使用

**总计：19个文件**

## 清理后的目录结构

```
src/components/SyncTaskWizard/
├── index.vue                          # 主组件
├── TaskHeader.vue                     # 任务头部
├── DataSourceTypeSelector.vue         # 数据源类型选择
├── Step1SelectDataSourceType.vue     # 前置配置
│
├── shared/                            # 共享组件
│   ├── DataSourceSelector.vue         # 数据源选择器
│   └── SyncConfigForm.vue             # 同步配置表单
│
├── Step2/                             # 步骤2相关组件
│   └── DbNameTransform.vue            # 数据库名称转换
│
└── TaskTypes/                         # 按任务类型组织
    ├── MySQLToMySQL/
    │   ├── Step2SelectTables.vue
    │   ├── Step3SyncConfig.vue
    │   └── Step4Confirm.vue
    ├── MySQLToES/
    │   ├── Step2SelectTables.vue
    │   ├── Step3SyncConfig.vue
    │   └── Step4Confirm.vue
    ├── ESToMySQL/
    │   ├── Step2SelectIndices.vue
    │   ├── Step3SyncConfig.vue
    │   └── Step4Confirm.vue
    └── ESToES/
        ├── Step2FilterIndices.vue
        ├── Step3SelectIndices.vue
        ├── Step4SyncConfig.vue
        └── Step5Confirm.vue
```

## 清理效果

### 文件数量对比
- **清理前：** 43个文件
- **清理后：** 24个文件
- **减少：** 19个文件（44%）

### 优点
1. ✅ 目录结构清晰，没有冗余文件
2. ✅ 文件命名规范统一
3. ✅ 职责划分明确
4. ✅ 易于维护和扩展

### 注意事项
- 所有删除的文件都已确认未被使用
- 删除前已通过 grepSearch 工具验证引用关系
- 保留的文件都是当前流程中正在使用的组件

## 验证方法

删除后需要验证：
1. 运行 `npm run dev` 确保没有编译错误
2. 测试创建任务流程
3. 测试编辑任务流程
4. 测试各种任务类型（MySQL→MySQL, MySQL→ES, ES→MySQL, ES→ES）

## 执行结果

### 删除执行时间
2025-01-27

### 删除状态
✅ **成功删除 19 个文件**

所有文件已成功删除，无错误。

### 编译验证
✅ **通过**
- `src/components/SyncTaskWizard/index.vue` - 无诊断错误
- `src/views/SyncTaskConfig.vue` - 无诊断错误

### 清理后的实际文件统计

**根目录：** 4个文件
- index.vue
- TaskHeader.vue
- DataSourceTypeSelector.vue
- Step1SelectDataSourceType.vue

**shared/ 目录：** 2个文件
- DataSourceSelector.vue
- SyncConfigForm.vue

**Step2/ 目录：** 1个文件
- DbNameTransform.vue

**TaskTypes/ 目录：** 13个文件
- MySQLToMySQL: 3个文件（Step2, Step3, Step4）
- MySQLToES: 3个文件（Step2, Step3, Step4）
- ESToMySQL: 3个文件（Step2, Step3, Step4）
- ESToES: 4个文件（Step2, Step3, Step4, Step5）

**总计：** 20个文件

### 清理效果对比
- **清理前：** 约 39 个文件
- **清理后：** 20 个文件
- **减少：** 19 个文件（约 49%）

## 回滚方法

如果需要回滚，可以从 Git 历史中恢复：
```bash
git checkout HEAD -- src/components/SyncTaskWizard/
```
